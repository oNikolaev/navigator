Перем м_СоответствиеКартинок;
Перем м_СоответствиеИменСвойствТиповКоллекций;

Перем м_ПрефиксыПоискаОбъектов;
Перем м_АдресСтруктураХраненияБазыДанных;
Перем м_АдресСтруктураМетаданныхКонфигурации;

#Область Интерфейс

Процедура ДобавитьВИзбранное(Ссылка) Экспорт
	
	стр_ИзбранныеЭлементы = ИзбранныеЭлементы.Добавить();
	стр_ИзбранныеЭлементы.ИдЗаписи      = Новый УникальныйИдентификатор();
	стр_ИзбранныеЭлементы.Ссылка        = Ссылка;
	стр_ИзбранныеЭлементы.Представление = Ссылка;
	
КонецПроцедуры

// Позволяет определить, есть ли среди реквизитов объекта реквизит с переданным именем.
//
// Параметры:
//	ИмяРеквизита - Строка - имя реквизита;
//	МетаданныеОбъекта - ОбъектМетаданных - объект, в котором требуется проверить наличие реквизита.
//
// Возвращаемое значение:
//	Булево - Истина, если есть.
//
Функция ЕстьРеквизитОбъекта(ИмяРеквизита, МетаданныеОбъекта) Экспорт
	
	Возврат Не (МетаданныеОбъекта.Реквизиты.Найти(ИмяРеквизита) = Неопределено);
	
КонецФункции

// Позволяет определить, есть ли среди стандартных реквизитов объекта реквизит с переданным именем.
//
// Параметры:
//  ИмяРеквизита - Строка - имя реквизита;
//  МетаданныеОбъекта - ОбъектМетаданных - объект, в котором требуется проверить наличие реквизита.
//
// Возвращаемое значение:
//  Булево - Истина, если есть.
//
Функция ЕстьСтандартныйРеквизитОбъекта(ИмяРеквизита, ОбъектМд) Экспорт
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяРеквизита) Тогда
		Возврат Ложь;
	КонецЕсли;
	
	Если ОбъектМд = Неопределено Тогда
		Возврат Ложь;
	КонецЕсли;
	
	#КонецОбласти
	
	ЕстьСтРеквизит = Ложь;
	
	Для каждого СтРеквизит Из ОбъектМд.СтандартныеРеквизиты Цикл
		
		Если ВРег(СтРеквизит.Имя) = ВРег(ИмяРеквизита) Тогда
			ЕстьСтРеквизит = Истина;
			Прервать;
		КонецЕсли;
		
	КонецЦикла;
	
	Возврат ЕстьСтРеквизит;
	
КонецФункции

Функция ПолноеИмяФормыОбработки(ИмяТекущейФормы, ИмяФормыОбработки) Экспорт
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяТекущейФормы) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(ИмяФормыОбработки) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	ЧастиСтроки = СтрРазделить(ИмяТекущейФормы, ".", Ложь);
	
	Результат = СтрШаблон("%1.%2.%3.%4", ЧастиСтроки[0], ЧастиСтроки[1], ЧастиСтроки[2], ИмяФормыОбработки);
	
	Возврат Результат;
	
КонецФункции

#КонецОбласти

#Область События

Процедура ПриИнициализации()
	
	Система_РазделительЧастейИмен = "_777_";
	
	ЗаполнитьСоответствиеКартинок();
	ЗаполнитьСоответствиеИменСвойствТиповКоллекций();
	ЗаполнитьТаблицыСтруктурыМетаданных();
	ЗаполнитьПрефиксыПоискаОбъектов();
	
КонецПроцедуры

#КонецОбласти

#Область Инициализация

Процедура ДобавитьСвязиПоВладельцам(ОбъектМД)
	
	#Область Предусловия
	
	Если Не ЭтоСправочник(ОбъектМД) Тогда
		Возврат;
	КонецЕсли;
	
	Если ОбъектМД.Владельцы.Количество() = 0 Тогда
		Возврат;
	КонецЕсли;
	
	#КонецОбласти
	
	Для каждого ОбъектМдВладелец Из ОбъектМД.Владельцы Цикл
		
		стр_СвязиПоВладельцам = СвязиПоВладельцам.Добавить();
		стр_СвязиПоВладельцам.ИмяОбъекта            = ОбъектМдВладелец.ПолноеИмя();
		стр_СвязиПоВладельцам.ЯвляетсяВладельцемДля = ОбъектМД.ПолноеИмя();
		
	КонецЦикла;
	
КонецПроцедуры

Процедура ЗаполнитьСоответствиеКартинок()
	
	м_СоответствиеКартинок = Новый Соответствие;
	м_СоответствиеКартинок.Вставить("Пользователь",                  0);
	м_СоответствиеКартинок.Вставить("Конфигурация",                  1);
	м_СоответствиеКартинок.Вставить("ОбщиеОбъекты",                  2);
	м_СоответствиеКартинок.Вставить("Константа",                     3);
	м_СоответствиеКартинок.Вставить("Справочник",                    4);
	м_СоответствиеКартинок.Вставить("Документ",                      5);
	м_СоответствиеКартинок.Вставить("ЖурналДокументов",              6);
	м_СоответствиеКартинок.Вставить("Перечисление",                  7);
	м_СоответствиеКартинок.Вставить("Отчет",                         8);
	м_СоответствиеКартинок.Вставить("Обработка",                     9);
	м_СоответствиеКартинок.Вставить("ПланВидовХарактеристик",       10);
	м_СоответствиеКартинок.Вставить("ПланСчетов",                   11);
	м_СоответствиеКартинок.Вставить("ПланВидовРасчета",             12);
	м_СоответствиеКартинок.Вставить("РегистрСведений",              13);
	м_СоответствиеКартинок.Вставить("РегистрНакопления",            14);
	м_СоответствиеКартинок.Вставить("РегистрБухгалтерии",           15);
	м_СоответствиеКартинок.Вставить("РегистрРасчета",               16);
	м_СоответствиеКартинок.Вставить("БизнесПроцесс",                17);
	м_СоответствиеКартинок.Вставить("Задача",                       18);
	м_СоответствиеКартинок.Вставить("ВнешнийИсточникДанных",        19);
	м_СоответствиеКартинок.Вставить("Подсистема",                   20);
	м_СоответствиеКартинок.Вставить("ОбщийМодуль",                  21);
	м_СоответствиеКартинок.Вставить("ПараметрСеанса",               22);
	м_СоответствиеКартинок.Вставить("Роль",                         23);
	м_СоответствиеКартинок.Вставить("ОбщиеРеквизиты",               24);
	м_СоответствиеКартинок.Вставить("ПланыОбмена",                  25);
	м_СоответствиеКартинок.Вставить("КритерииОтбора",               26);
	м_СоответствиеКартинок.Вставить("ПодпискиНаСобытия",            27);
	м_СоответствиеКартинок.Вставить("РегламентныеЗадания",          28);
	м_СоответствиеКартинок.Вставить("ФункциональныеОпции",          29);
	м_СоответствиеКартинок.Вставить("ПараметрыФункциональныхОпций", 30);
	м_СоответствиеКартинок.Вставить("ОпределяемыеТипы",             31);
	м_СоответствиеКартинок.Вставить("ХранилищаНастроек",            32);
	м_СоответствиеКартинок.Вставить("ОбщиеФормы",                   33);
	м_СоответствиеКартинок.Вставить("ОбщиеКоманды",                 34);
	м_СоответствиеКартинок.Вставить("ГруппыКоманд",                 35);
	м_СоответствиеКартинок.Вставить("ОбщиеМакеты",                  36);
	м_СоответствиеКартинок.Вставить("ОбщиеКартинки",                37);
	м_СоответствиеКартинок.Вставить("XDTOПакеты",                   38);
	м_СоответствиеКартинок.Вставить("WebСервисы",                   39);
	м_СоответствиеКартинок.Вставить("HTTPСервисы",                  40);
	м_СоответствиеКартинок.Вставить("WSСсылки",                     41);
	м_СоответствиеКартинок.Вставить("ЭлементыСтиля",                42);
	м_СоответствиеКартинок.Вставить("Язык",                         43);
	м_СоответствиеКартинок.Вставить("СтандартныйРеквизит",          44);
	м_СоответствиеКартинок.Вставить("Реквизит",                     45);
	м_СоответствиеКартинок.Вставить("ТабичнаяЧасть",                46);
	м_СоответствиеКартинок.Вставить("Измерение",                    47);
	м_СоответствиеКартинок.Вставить("Ресурс",                       48);
	м_СоответствиеКартинок.Вставить("Пользователь",                 49);
	м_СоответствиеКартинок.Вставить("СистемныеРеквизиты",           50);
	м_СоответствиеКартинок.Вставить("СистемныйРеквизит",            51);
	
КонецПроцедуры

Процедура ЗаполнитьСоответствиеИменСвойствТиповКоллекций()
	
	м_СоответствиеИменСвойствТиповКоллекций = Новый Соответствие();
	
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("Подсистема", "Подсистемы");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ОбщийМодуль", "ОбщиеМодули");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ПараметрСеанса", "ПараметрыСеанса");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("Роль", "Роли");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ОбщийРеквизит", "ОбщиеРеквизиты");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("КритерийОтбора", "КритерииОтбора");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ПодпискаНаСобытие", "ПодпискиНаСобытия");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("РегламентноеЗадание", "РегламентныеЗадания");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ФункциональнаяОпция", "ФункциональныеОпции");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ПараметрФункциональныхОпций", "ПараметрыФункциональныхОпций");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ОпределяемыйТип", "ОпределяемыеТипы");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ХранилищеНастроек", "ХранилищаНастроек");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ОбщаяФорма", "ОбщиеФормы");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ОбщаяКоманда", "ОбщиеКоманды");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ГруппаКоманд", "ГруппыКоманд");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ОбщийМакет", "ОбщиеМакеты");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ОбщаяКартинка", "ОбщиеКартинки");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ПакетXDTO", "ПакетыXDTO");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ВебСервис", "ВебСервисы");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("HTTPСервис", "HTTPСервисы");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("WSСсылка", "WSСсылки");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ЭлеметСтиля", "ЭлементыСтиля");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("Стиль", "Стили");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("Язык", "Языки");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("Константа", "Константы");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("Справочник", "Справочники");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("Документ", "Документы");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ЖурналДокументов", "ЖурналыДокументов");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("Перечисление", "Перечисления");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("Отчет", "Отчеты");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("Обработка", "Обработки");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ПланВидовХарактеристик", "ПланыВидовХарактеристик");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ПланСчетов", "ПланыСчетов");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ПланВидовРасчета", "ПланыВидовРасчета");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("РегистрСведений", "РегистрыСведений");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("РегистрНакопления", "РегистрыНакопления");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("РегистрБухгалтерии", "РегистрыБухгалтерии");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("РегистрРасчета", "РегистрыРасчета");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("БизнесПроцесс", "БизнесПроцессы");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("Задача", "Задачи");
	м_СоответствиеИменСвойствТиповКоллекций.Вставить("ВнешнийИсточникДанных", "ВнешниеИсточникиДанных");
	
КонецПроцедуры

Процедура ЗаполнитьПрефиксыПоискаОбъектов()
	
	м_ПрефиксыПоискаОбъектов = Новый Соответствие;
	м_ПрефиксыПоискаОбъектов.Вставить("Справочник",                  "СП");
	м_ПрефиксыПоискаОбъектов.Вставить("РегистрСведений",             "РС");
	м_ПрефиксыПоискаОбъектов.Вставить("РегистрНакопления",           "РН");
	м_ПрефиксыПоискаОбъектов.Вставить("Константа",                   "КН");
	м_ПрефиксыПоискаОбъектов.Вставить("Подсистема",                  "ПД");
	м_ПрефиксыПоискаОбъектов.Вставить("ОбщийМодуль",                 "ОМ");
	м_ПрефиксыПоискаОбъектов.Вставить("ПараметрСеанса",              "ПС");
	м_ПрефиксыПоискаОбъектов.Вставить("Роль",                        "РЛ");
	м_ПрефиксыПоискаОбъектов.Вставить("ОбщийРеквизит",               "ОР");
	м_ПрефиксыПоискаОбъектов.Вставить("ПланОбмена",                  "ПО");
	м_ПрефиксыПоискаОбъектов.Вставить("КритерийОтбора",              "КО");
	м_ПрефиксыПоискаОбъектов.Вставить("ПодпискаНаСобытие",           "ПН");
	м_ПрефиксыПоискаОбъектов.Вставить("РегламентноеЗадание",         "РЗ");
	м_ПрефиксыПоискаОбъектов.Вставить("ФункциональнаяОпция",         "ФО");
	м_ПрефиксыПоискаОбъектов.Вставить("ПараметрФункциональнойОпции", "ПФ");
	м_ПрефиксыПоискаОбъектов.Вставить("ОпределяемыйТип",             "ОТ");
	м_ПрефиксыПоискаОбъектов.Вставить("ХранилищеНастроек",           "ХН");
	м_ПрефиксыПоискаОбъектов.Вставить("ОбщаяФорма",                  "ОФ");
	м_ПрефиксыПоискаОбъектов.Вставить("ОбщаяКоманда",                "ОКД");
	м_ПрефиксыПоискаОбъектов.Вставить("ГруппаКоманд",                "ГК");
	м_ПрефиксыПоискаОбъектов.Вставить("ОбщийМакет",                  "ОК");
	м_ПрефиксыПоискаОбъектов.Вставить("ОбщаяКартинка",               "ОКР");
	м_ПрефиксыПоискаОбъектов.Вставить("ПакетXDTO",                   "XD");
	м_ПрефиксыПоискаОбъектов.Вставить("WebСервис",                   "WS");
	м_ПрефиксыПоискаОбъектов.Вставить("HTTPСервис",                  "HT");
	м_ПрефиксыПоискаОбъектов.Вставить("ЭлементСтиля",                "ЭС");
	м_ПрефиксыПоискаОбъектов.Вставить("Язык",                        "ЯЗ");
	м_ПрефиксыПоискаОбъектов.Вставить("Документ",                   "ДК");
	м_ПрефиксыПоискаОбъектов.Вставить("ЖурналДокументов",            "ЖД");
	м_ПрефиксыПоискаОбъектов.Вставить("Перечисление",                "ПЧ");
	м_ПрефиксыПоискаОбъектов.Вставить("Отчет",                       "ОЧ");
	м_ПрефиксыПоискаОбъектов.Вставить("Обработка",                   "ОБ");
	м_ПрефиксыПоискаОбъектов.Вставить("ПланВидовХарактеристик",      "ПХ");
	м_ПрефиксыПоискаОбъектов.Вставить("ПланСчетов",                  "ПСЧ");
	м_ПрефиксыПоискаОбъектов.Вставить("ПланВидовРасчета",            "ПР");
	м_ПрефиксыПоискаОбъектов.Вставить("РегистрыБухгалтерии",         "РБ");
	м_ПрефиксыПоискаОбъектов.Вставить("ВнешниеИсточникиДанных",      "ВИ");
	
КонецПроцедуры

Процедура ЗаполнитьТаблицыСтруктурыМетаданных()
	
	Для каждого ОбъектМД Из Метаданные.Справочники Цикл
		ДобавитьСвязиПоВладельцам(ОбъектМД);
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти

#Область ДеревоМетаданных

// Дерево структуры метаданных конфигурации информационной базы.
//
// Параметры:
//	ПараметрыФормирования - Структура - параметры формирования структуры метаданных, см. Тип_ПараметрыФормированияСтруктурыМетаданных().
//
// Возвращаемое значение:
//	ДеревоЗначений. см. Тип_СтруктураМетаданныхКонфигурации().
//
Функция СтруктураМетаданныхКонфигурации(ПараметрыФормирования = Неопределено) Экспорт
	
	Перем СтруктураХраненияБазыДанных;
	
	// Кэшировать структуру хранения базы данных, дерево метаданных конфигурации.
	
	ИдОбъектаХраненияВременныхДанных     = СвойствоСтруктуры(ПараметрыФормирования, "ИдОбъектаХраненияВременныхДанных", "");
	АдресСтруктураХраненияБазыДанных     = СвойствоСтруктуры(ПараметрыФормирования, "АдресСтруктураХраненияБазыДанных", "");
	АдресСтруктурыМетаданныхКонфигурации = СвойствоСтруктуры(ПараметрыФормирования, "АдресСтруктурыМетаданныхКонфигурации", "");
	
	Если Не ЗначениеЗаполнено(АдресСтруктураХраненияБазыДанных) Тогда
		
		СтруктураХраненияБазыДанных = ПолучитьСтруктуруХраненияБазыДанных();
		
		Если ЗначениеЗаполнено(ИдОбъектаХраненияВременныхДанных) Тогда
			АдресСтруктураХраненияБазыДанных = ПоместитьВоВременноеХранилище(СтруктураХраненияБазыДанных, ИдОбъектаХраненияВременныхДанных);
			м_АдресСтруктураХраненияБазыДанных = АдресСтруктураХраненияБазыДанных;
		КонецЕсли;
		
	Иначе
		м_АдресСтруктураХраненияБазыДанных = АдресСтруктураХраненияБазыДанных;
	КонецЕсли;
	
	Если (СтруктураХраненияБазыДанных = Неопределено) Тогда
		СтруктураХраненияБазыДанных = ПолучитьИзВременногоХранилища(АдресСтруктураХраненияБазыДанных);
	КонецЕсли;
	
	УстановитьСвойствоСтруктуры(ПараметрыФормирования, "АдресСтруктураХраненияБазыДанных", АдресСтруктураХраненияБазыДанных);
	
	// Сформировать дерево структуры метаданных конфигурации
	
	Если ЗначениеЗаполнено(АдресСтруктурыМетаданныхКонфигурации) Тогда
		
		ДеревоМетаданных = ПолучитьИзВременногоХранилища(АдресСтруктурыМетаданныхКонфигурации);
		КопияДереваМетаданных = ДеревоМетаданных.Скопировать();
		
		м_АдресСтруктураМетаданныхКонфигурации = АдресСтруктурыМетаданныхКонфигурации;
		
		ЕстьОтбор = (СвойствоСтруктуры(ПараметрыФормирования, "Отбор").Количество() > 0);
		
		Если ЕстьОтбор Тогда
			ОтобратьСтрокиДереваМетаданныхРекурсивно(КопияДереваМетаданных.Строки, ПараметрыФормирования.Отбор);
		КонецЕсли;
		
		Результат = КопияДереваМетаданных;
		
	Иначе
		
		ДеревоМетаданных = Тип_СтруктураМетаданныхКонфигурации();
		ДеревоМетаданных.Строки.Очистить();
		
		ВсеКоллекции = ВсеКоллекцииОбъектовМетаданных();
		
		Для каждого Коллекция Из ВсеКоллекции Цикл
			ДобавитьКоллекциюОбъектовМетаданных(ДеревоМетаданных, Коллекция, ПараметрыФормирования);
		КонецЦикла;
		
		Если ЗначениеЗаполнено(ИдОбъектаХраненияВременныхДанных) Тогда
			АдресСтруктурыМетаданныхКонфигурации = ПоместитьВоВременноеХранилище(ДеревоМетаданных, ИдОбъектаХраненияВременныхДанных);
			м_АдресСтруктураМетаданныхКонфигурации = АдресСтруктурыМетаданныхКонфигурации;
		КонецЕсли;
		
		УстановитьСвойствоСтруктуры(ПараметрыФормирования, "АдресСтруктурыМетаданныхКонфигурации", АдресСтруктурыМетаданныхКонфигурации);
		
		Результат = ДеревоМетаданных;
		
	КонецЕсли;
	
	Возврат Результат;
	
КонецФункции

Процедура ОтобратьСтрокиДереваМетаданныхРекурсивно(СтрокиДереваМетаданных, Отбор)
	
	ИменаПолейПоиска = ИменаПолейПоискаОбъектовМетаданных();
	
	Граница = СтрокиДереваМетаданных.Количество() - 1;
	
	Для А = 0 По Граница Цикл
		
		Индекс = Граница - А;
		СтрокаДереваМетаданных = СтрокиДереваМетаданных[Индекс];
		
		Попытка
			ЕстьПодчиненные = (СтрокаДереваМетаданных.Строки.Количество() > 0);
		Исключение
			ЕстьПодчиненные = Ложь;
		КонецПопытки;
		
		Если ЕстьПодчиненные Тогда
			ОтобратьСтрокиДереваМетаданныхРекурсивно(СтрокаДереваМетаданных.Строки, Отбор);
		КонецЕсли;
		
		Если Не ЕстьПодчиненные Тогда
			
			СоответствуетУсловию = Ложь;
			
			Для каждого эл_Отбора Из Отбор Цикл
				
				Для каждого ИмяПоляПоиска Из ИменаПолейПоиска Цикл
					СоответствуетУсловию = СоответствуетУсловию 
						Или ОбъектМетаданныхСоответствуетУсловиюОтбора(СтрокаДереваМетаданных, СтрокаДереваМетаданных.ИмяЭлементаКоллекции, эл_Отбора, ИмяПоляПоиска);
				КонецЦикла;
				
			КонецЦикла;
			
			Если Не СоответствуетУсловию Тогда
				Если Не СтрокаДереваМетаданных.Родитель = Неопределено Тогда
					СтрокиДереваМетаданных.Удалить(Индекс);
				КонецЕсли;
			КонецЕсли;
		Иначе
			Если (СтрокаДереваМетаданных.Строки.Количество() = 0) Тогда
				СтрокиДереваМетаданных.Удалить(Индекс);
			КонецЕсли;
		КонецЕсли;
		
	КонецЦикла;
	
КонецПроцедуры

Функция СтруктураОбъектаМетаданных(ИмяКоллекции, ИмяОбъектаМетаданных) Экспорт
	
	Результат = Новый Структура;
	ПустойРезультат = Неопределено;
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяКоллекции) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(ИмяОбъектаМетаданных) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	Попытка
		ОбъектМетаданных = Метаданные[ИмяКоллекции][ИмяОбъектаМетаданных];
	Исключение
		Возврат ПустойРезультат;
	КонецПопытки;
	
	ИмяТипаОбъекта = ИмяТипаОбъектаМетаданных(ОбъектМетаданных);
	
	КоллекцииСвойств = КоллекцииСвойствОбъектаМетаданных();
	
	Для каждого КоллекцияСвойств Из КоллекцииСвойств Цикл
		
		Попытка
			КоллекцияСвойствМд = ОбъектМетаданных[КоллекцияСвойств.Имя];
		Исключение
			Продолжить;
		КонецПопытки;
		
		ДанныеКоллекции = Новый Массив;
		
		Если ТипЗнч(КоллекцияСвойствМд) = Тип("ОписанияСтандартныхРеквизитов")
			Или ТипЗнч(КоллекцияСвойствМд) = Тип("КоллекцияЗначенийСвойстваОбъектаМетаданных")
			Или ТипЗнч(КоллекцияСвойствМд) = Тип("КоллекцияОбъектовМетаданных") Тогда
			
			Для каждого ЭлементКоллекции Из КоллекцияСвойствМд Цикл
				
				ДанныеЭлементаКоллекции = Новый Структура("ТипЗаписи, Имя, Синоним, Комментарий, ИмяФормы, ДанныеКоллекции");
				ЗаполнитьЗначенияСвойств(ДанныеЭлементаКоллекции, ЭлементКоллекции);
				
				ДанныеЭлементаКоллекции.ДанныеКоллекции = Новый Массив;
				ДанныеЭлементаКоллекции.ТипЗаписи = "ОбъектМетаданных";
				
				Если КоллекцияСвойств.Имя = "ТабличныеЧасти" Тогда
					
					Для каждого Реквизит Из ЭлементКоллекции.Реквизиты Цикл
						
						СтруктураРеквизита = Новый Структура("ТипЗаписи, Имя, Синоним, Комментарий");
						ЗаполнитьЗначенияСвойств(СтруктураРеквизита, Реквизит);
						
						СтруктураРеквизита.ТипЗаписи = "ОбъектМетаданных";
						
						ДанныеЭлементаКоллекции.ДанныеКоллекции.Добавить(СтруктураРеквизита);
						
					КонецЦикла;
					
				ИначеЕсли КоллекцияСвойств.Имя = "Формы" Тогда
					
					ИмяФормыОбъекта = СтрШаблон("%1.%2.Форма.%3", ИмяТипаОбъекта, ОбъектМетаданных.Имя, ЭлементКоллекции.Имя);
					ДанныеЭлементаКоллекции.ИмяФормы = ИмяФормыОбъекта;
					
				КонецЕсли;
				
				ДанныеКоллекции.Добавить(ДанныеЭлементаКоллекции);
				
			КонецЦикла;
			
		ИначеЕсли ТипЗнч(КоллекцияСвойствМд) = Тип("ОписаниеТипов") Тогда
			
			// TODO Это ветка для построения списка источников. Надо разделять их по типам: справочники, документы и т.п.
			
			КоллекцияСвойствМд = КоллекцияСвойствМд.Типы();
			
			Для А = 0 По КоллекцияСвойствМд.Количество() - 1 Цикл
				
				ЭлементКоллекции = КоллекцияСвойствМд[А];
				ДанныеЭлементаКоллекции = Новый Структура("ТипЗаписи, Имя, Синоним, Комментарий, ДанныеКоллекции");
				
				ОбъектТипа = Новый (ЭлементКоллекции);
				МетаданныеОбъектТипа = ОбъектТипа.Метаданные();
				ЗаполнитьЗначенияСвойств(ДанныеЭлементаКоллекции, МетаданныеОбъектТипа);
				
				ДанныеЭлементаКоллекции.ДанныеКоллекции = Новый Массив;
				ДанныеЭлементаКоллекции.ТипЗаписи = "ОбъектМетаданных";
				
				Если КоллекцияСвойств.Имя = "ТабличныеЧасти" Тогда
					
					Для каждого Реквизит Из МетаданныеОбъектТипа.Реквизиты Цикл
						
						СтруктураРеквизита = Новый Структура("ТипЗаписи, Имя, Синоним, Комментарий");
						ЗаполнитьЗначенияСвойств(СтруктураРеквизита, Реквизит);
						
						СтруктураРеквизита.ТипЗаписи = "ОбъектМетаданных";
						
						ДанныеЭлементаКоллекции.ДанныеКоллекции.Добавить(СтруктураРеквизита);
						
					КонецЦикла;
					
				КонецЕсли;
				
				ДанныеКоллекции.Добавить(ДанныеЭлементаКоллекции);
				
				А = А + 1;
				
			КонецЦикла;
			
		КонецЕсли;
		
		Результат.Вставить(КоллекцияСвойств.Имя, Новый Структура("Коллекция, ДанныеКоллекции", КоллекцияСвойств, ДанныеКоллекции));
		
	КонецЦикла;
	
	Возврат Результат;
	
КонецФункции

Функция КоллекцииСвойствОбъектаМетаданных()
	
	Результат = Новый Массив;
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "СтандартныеРеквизиты", "СтандартныйРеквизит", "СтандартныеРеквизиты", "Стандартные реквизиты", 44));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "СтандартныеТабличныеЧасти", "СтандартнаяТабличнаяЧасть", "СтандартныеТабличныеЧасти", "Стандартные табличные части", 46));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Графы", "Граф", "Графы", "Графы"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "ЗначенияПеречисления", "ЗначениеПеречисления", "ЗначенияПеречисления", "Значения", 45));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Измерения", "Измерение", "Измерения", "Измерения", 47));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Ресурсы", "Ресурс", "Ресурсы", "Ресурсы", 48));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Реквизиты", "Реквизит", "Реквизиты", "Реквизиты", 45));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "ПризнакиУчета", "ПризнакУчета", "ПризнакиУчета", "Признаки учета"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "ПризнакиУчетаСубконто", "ПризнакУчетаСубконто", "ПризнакиУчетаСубконто", "Признаки учета субконто"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Перерасчеты", "Перерасчет", "Перерасчеты", "Перерасчеты"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "ТабличныеЧасти", "ТабличнаяЧасть", "ТабличныеЧасти", "Табличные части", 46));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Формы", "Форма", "Формы", "Формы", 33));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Команды", "Команда", "Команды", "Команды", 34));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Макеты", "Макет", "Макеты", "Макеты", 36));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Операции", "Операция", "Операции", "Операции"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Источник", "Источник", "Источник", "Источник"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Состав", "Состав", "Состав", "Состав"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "РеквизитыАдресации", "РеквизитАдресации", "РеквизитыАдресации", "Реквизиты адресации"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Перерасчеты", "Перерасчет", "Перерасчеты", "Перерасчеты"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "ПризнакиУчета", "ПризнакУчета", "ПризнакиУчета", "Признаки учета"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "ПризнакиУчетаСубконто", "ПризнакУчетаСубконто", "ПризнакиУчетаСубконто", "Признаки учета субконто"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Поля", "Поле", "Поля", "Поля"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Таблицы", "Таблица", "Таблицы", "Таблицы"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Кубы", "Куб", "Кубы", "Кубы"));
	
	Результат.Добавить(Новый Структура("ТипЗаписи, ИмяКоллекции, ИмяЭлементаКоллекции, Имя, Синоним, НомерКартинки", "ГруппаОбъектовМетаданных", "Функции", "Функция", "Функции", "Функции"));
	
	Возврат Результат;
	
КонецФункции

// Включает коллекцию объектов метаданных в дерево метаданных конфигурации.
//
// Параметры:
//	ДеревоМетаданных - ДеревоЗначений - дерево метаданных конфигурации.
//	СвойстваКоллекции - СтрокаТаблицыЗначений - строка описания коллекции метаданных.
//		* ИмяКоллекции - Строка - имя коллекции. Например: "Общие.ОбщиеМодули".
//		* ИмяЭлементаКоллекции - Строка - имя элемента коллекции. Например: "ОбщийМодуль".
//		* НомерКартинки - Число - номер картинки коллекции.
//		* СинонимКоллекции - Строка - синоним коллекции. Например: "Общие модули".
//	ПараметрыДобавления - Тип_ПараметрыФормированияСтруктурыМетаданных, Неопределено - параметры формирования структуры метаданных.
//
Процедура ДобавитьКоллекциюОбъектовМетаданных(ДеревоМетаданных, СвойстваКоллекции, ПараметрыДобавления = Неопределено)
	
	// Прочитать дополнительные параметры из структуры.
	
	Сортировать = СвойствоСтруктуры(ПараметрыДобавления, "СортироватьОбъектыМетаданных", Ложь);
	Отбор       = СвойствоСтруктуры(ПараметрыДобавления, "Отбор", Неопределено);
	
	// Добавить коллекцию в дерево объектов метаданных.
	
	ИмяКоллекции = СвойстваКоллекции.ИмяКоллекции;
	
	СтрокаГруппыМетаданных = Неопределено;
	
	ЧастиИмени = СтрРазделить(ИмяКоллекции, ".", Ложь);
	
	Если ЧастиИмени.Количество() > 1 Тогда
		
		ИмяГруппы    = ЧастиИмени[0]; // "Общие"
		ИмяКоллекции = ЧастиИмени[1]; // "Картинки"
		
		Строки = ДеревоМетаданных.Строки.НайтиСтроки(
			Новый Структура("ТипЗаписи, Имя", "ГруппаКоллекцийОбъектовМетаданных", ИмяГруппы));
		
		Если Строки.Количество() = 0 Тогда
			СтрокаГруппыМетаданных = ДеревоМетаданных.Строки.Добавить();
			СтрокаГруппыМетаданных.ТипЗаписи            = "ГруппаКоллекцийОбъектовМетаданных";
			СтрокаГруппыМетаданных.ИмяКоллекции         = ИмяГруппы;
			СтрокаГруппыМетаданных.ИмяЭлементаКоллекции = ИмяГруппы;
			СтрокаГруппыМетаданных.Имя                  = ИмяГруппы;
			СтрокаГруппыМетаданных.Представление        = ИмяГруппы;
			СтрокаГруппыМетаданных.Синоним              = ИмяГруппы;
			СтрокаГруппыМетаданных.НомерКартинки        = 2;
		Иначе
			СтрокаГруппыМетаданных = Строки[0];
		КонецЕсли;
		
	КонецЕсли;
	
	ТекущийРодительСтроки = Неопределено;
	
	Если СтрокаГруппыМетаданных = Неопределено Тогда
		СтрокаКоллекцииМетаданных = ДеревоМетаданных.Строки.Добавить();
		ТекущийРодительСтроки = ДеревоМетаданных;
	Иначе
		СтрокаКоллекцииМетаданных = СтрокаГруппыМетаданных.Строки.Добавить();
		ТекущийРодительСтроки = СтрокаГруппыМетаданных;
	КонецЕсли;
	
	СтрокаКоллекцииМетаданных.ТипЗаписи            = "КоллекцияОбъектовМетаданных";
	СтрокаКоллекцииМетаданных.ИмяКоллекции         = ИмяКоллекции;
	СтрокаКоллекцииМетаданных.ИмяЭлементаКоллекции = СвойстваКоллекции.ИмяЭлементаКоллекции;
	СтрокаКоллекцииМетаданных.Имя                  = ИмяКоллекции;
	СтрокаКоллекцииМетаданных.Представление        = ИмяКоллекции;
	СтрокаКоллекцииМетаданных.Синоним              = СвойстваКоллекции.СинонимКоллекции;
	СтрокаКоллекцииМетаданных.НомерКартинки        = СвойстваКоллекции.НомерКартинки;
	
	ИменаПолейПоиска = ИменаПолейПоискаОбъектовМетаданных();
	
	Если ИмяКоллекции = "Подсистемы" Тогда // Только подсистемы могут быть вложенными
		
		Для каждого Подсистема Из Метаданные[ИмяКоллекции] Цикл
			ДобавитьПодсистемуРекурсивно(СтрокаКоллекцииМетаданных, СвойстваКоллекции, Подсистема, ПараметрыДобавления);
		КонецЦикла;
		
		Если СтрокаКоллекцииМетаданных.Строки.Количество() = 0 Тогда
			СтрокаКоллекцииМетаданных.Родитель.Строки.Удалить(СтрокаКоллекцииМетаданных);
		КонецЕсли;
		
	Иначе
		
		Для каждого ОбъектМетаданных Из Метаданные[ИмяКоллекции] Цикл
			
			Добавлять = Ложь;
			
			Если (Отбор = Неопределено) Тогда
				Добавлять = Истина;
			Иначе
				
				Если Отбор.Количество() = 0 Тогда
					Добавлять = Истина;
				Иначе
					
					Для каждого эл_Отбора Из Отбор Цикл
						
						Для каждого ИмяПоляПоиска Из ИменаПолейПоиска Цикл
							Добавлять = Добавлять Или ОбъектМетаданныхСоответствуетУсловиюОтбора(ОбъектМетаданных, СвойстваКоллекции.ИмяЭлементаКоллекции, эл_Отбора, ИмяПоляПоиска);
						КонецЦикла;
						
					КонецЦикла;
					
				КонецЕсли;
				
			КонецЕсли;
			
			Если Не Добавлять Тогда
				Продолжить;
			КонецЕсли;
			
			// Добавить объект метаданных в дерево конфигурации
			
			ПолноеИмя = СтрШаблон("%1.%2", СвойстваКоллекции.ИмяЭлементаКоллекции, ОбъектМетаданных.Имя);
			
			СтрокаОбъектаМетаданных = СтрокаКоллекцииМетаданных.Строки.Добавить();
			СтрокаОбъектаМетаданных.ИмяКоллекции         = ИмяКоллекции;
			СтрокаОбъектаМетаданных.ИмяЭлементаКоллекции = СвойстваКоллекции.ИмяЭлементаКоллекции;
			СтрокаОбъектаМетаданных.Имя                  = ОбъектМетаданных.Имя;
			СтрокаОбъектаМетаданных.Представление        = ОбъектМетаданных.Имя;
			СтрокаОбъектаМетаданных.Синоним              = ОбъектМетаданных.Синоним;
			СтрокаОбъектаМетаданных.Комментарий          = ОбъектМетаданных.Комментарий;
			СтрокаОбъектаМетаданных.ТипЗаписи            = "ОбъектМетаданных";
			СтрокаОбъектаМетаданных.НомерКартинки        = СвойстваКоллекции.НомерКартинки;
			СтрокаОбъектаМетаданных.ПолноеИмя            = ПолноеИмя;
			
			// TODO Продумать построение полного дерева, чтение структуры всех объектов занимает слишком много времени
			
			//СтруктураОбъекта = СтруктураОбъектаМетаданных(ИмяКоллекции, ОбъектМетаданных.Имя);
			
			// Добавить реквизиты
			// Добавить формы
			// Добавить макеты
			// Добавить команды
			
		КонецЦикла;
		
		Если Сортировать Тогда
			ВключатьПодчиненные = Истина;
			СтрокаКоллекцииМетаданных.Строки.Сортировать("Имя Возр", ВключатьПодчиненные);
		КонецЕсли;
		
		Если СтрокаКоллекцииМетаданных.Строки.Количество() = 0 Тогда
			
			Если Не (СтрокаКоллекцииМетаданных.Родитель = Неопределено) Тогда
				СтрокаКоллекцииМетаданных.Родитель.Строки.Удалить(СтрокаКоллекцииМетаданных);
			Иначе
				ТекущийРодительСтроки.Строки.Удалить(СтрокаКоллекцииМетаданных);
			КонецЕсли;
			
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры

Процедура ДобавитьПодсистемуРекурсивно(Строка, СвойстваКоллекции, Подсистема, Параметры)
	
	Если Подсистема.Подсистемы.Количество() > 0 Тогда
		
		ПодчиненнаяСтрока = Строка.Строки.Добавить();
		ПодчиненнаяСтрока.ИмяКоллекции = "Подсистемы";
		ПодчиненнаяСтрока.ИмяЭлементаКоллекции = СвойстваКоллекции.ИмяЭлементаКоллекции;
		ПодчиненнаяСтрока.Имя = Подсистема.Имя;
		ПодчиненнаяСтрока.Представление = Подсистема.Имя;
		ПодчиненнаяСтрока.Синоним = Подсистема.Синоним;
		ПодчиненнаяСтрока.Комментарий = Подсистема.Комментарий;
		ПодчиненнаяСтрока.ТипЗаписи = "ОбъектМетаданных";
		ПодчиненнаяСтрока.НомерКартинки = СвойстваКоллекции.НомерКартинки;
		
		Для каждого ПодчиненнаяПодсистема Из Подсистема.Подсистемы Цикл
			ДобавитьПодсистемуРекурсивно(ПодчиненнаяСтрока, СвойстваКоллекции, ПодчиненнаяПодсистема, Параметры);
		КонецЦикла;
		
		Если ПодчиненнаяСтрока.Строки.Количество() = 0 Тогда
			Строка.Строки.Удалить(ПодчиненнаяСтрока);
		КонецЕсли;
		
	Иначе
		
		Добавлять = Ложь;
		Отбор = СвойствоСтруктуры(Параметры, "Отбор", Неопределено);
		
		Если Отбор = Неопределено Тогда
			Добавлять = Истина;
		Иначе
			
			Для каждого эл_Отбора Из Отбор Цикл
				
				Если Не ЗначениеЗаполнено(эл_Отбора.ЗначениеОтбора) Тогда
					Продолжить;
				КонецЕсли;
				
				ВыполнитьОтбор = Ложь;
				
				Если ЗначениеЗаполнено(эл_Отбора.ПрефиксТипаОбъекта) Тогда
					Если м_ПрефиксыПоискаОбъектов.Получить("Подсистема") = эл_Отбора.ПрефиксТипаОбъекта Тогда
						ВыполнитьОтбор = Истина;
					КонецЕсли;
				Иначе
					ВыполнитьОтбор = Истина;
				КонецЕсли;
				
				Если ВыполнитьОтбор Тогда
					
					Если эл_Отбора.ИмяПоля = "Имя" Тогда
						Если Найти(ВРег(Подсистема.Имя), ВРег(эл_Отбора.ЗначениеОтбора)) > 0 Тогда
							Добавлять = Истина;
						КонецЕсли;
					КонецЕсли;
					
					Если эл_Отбора.ИмяПоля = "Синоним" Тогда
						Если Найти(ВРег(Подсистема.Синоним), ВРег(эл_Отбора.ЗначениеОтбора)) > 0 Тогда
							Добавлять = Истина;
						КонецЕсли;
					КонецЕсли;
					
					Если эл_Отбора.ИмяПоля = "Комментарий" Тогда
						Если Найти(ВРег(Подсистема.Комментарий), ВРег(эл_Отбора.ЗначениеОтбора)) > 0 Тогда
							Добавлять = Истина;
						КонецЕсли;
					КонецЕсли;
					
				КонецЕсли;
				
			КонецЦикла;
			
		КонецЕсли;
		
		Если Добавлять Тогда
			ПодчиненнаяСтрока = Строка.Строки.Добавить();
			ПодчиненнаяСтрока.ИмяКоллекции = "Подсистемы";
			ПодчиненнаяСтрока.ИмяЭлементаКоллекции = СвойстваКоллекции.ИмяЭлементаКоллекции;
			ПодчиненнаяСтрока.Имя = Подсистема.Имя;
			ПодчиненнаяСтрока.Представление = Подсистема.Имя;
			ПодчиненнаяСтрока.Синоним = Подсистема.Синоним;
			ПодчиненнаяСтрока.Комментарий = Подсистема.Комментарий;
			ПодчиненнаяСтрока.ТипЗаписи = "ОбъектМетаданных";
			ПодчиненнаяСтрока.НомерКартинки = СвойстваКоллекции.НомерКартинки;
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

Функция ИменаПолейПоискаОбъектовМетаданных()
	
	Результат = Новый Массив;
	Результат.Добавить("Имя");
	Результат.Добавить("Синоним");
	Результат.Добавить("Комментарий");
	
	Возврат Результат;
	
КонецФункции

Функция ОбъектМетаданныхСоответствуетУсловиюОтбора(СтруктураОбъектаМетаданных, ИмяЭлементаКоллекции, ЭлементОтбора, ИмяПоля)
	
	Результат = Ложь;
	
	#Область Предусловия
	
	Если СтруктураОбъектаМетаданных = Неопределено Тогда
		Возврат Ложь;
	КонецЕсли;
	
	Если ЭлементОтбора = Неопределено Тогда
		Возврат Ложь;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(ИмяПоля) Тогда
		Возврат Истина;
	КонецЕсли;
	
	Если Не (ЭлементОтбора.ИмяПоля = ИмяПоля) Тогда
		Возврат Ложь;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(ЭлементОтбора.ЗначениеОтбора) Тогда
		Возврат Истина;
	КонецЕсли;
	
	Если ЗначениеЗаполнено(ЭлементОтбора.ПрефиксТипаОбъекта) Тогда
		Если Не м_ПрефиксыПоискаОбъектов.Получить(ИмяЭлементаКоллекции) = ЭлементОтбора.ПрефиксТипаОбъекта Тогда
			Возврат Ложь;
		КонецЕсли;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(ЭлементОтбора.ЗначениеОтбора) Тогда
		Возврат Истина;
	КонецЕсли;
	
	Если ЭлементОтбора.ЗначениеОтбора = "*" Тогда
		Возврат Истина;
	КонецЕсли;
	
	#КонецОбласти
	
	ПроверяемаяСтрока = ВРег(СтруктураОбъектаМетаданных[ИмяПоля]);
	СтрокаПоиска = ВРег(ЭлементОтбора.ЗначениеОтбора);
	
	ТипПоиска = "ПервоеВхождение";
	
	Если СтрНачинаетсяС(СтрокаПоиска, "*") И Не (СтрДлина(СтрокаПоиска) = 1) Тогда
		ТипПоиска = "ЗаканчиваетсяНа";
	КонецЕсли;
	
	Если ТипПоиска = "ПервоеВхождение" Тогда
		Результат = СтрНайти(ПроверяемаяСтрока, СтрокаПоиска) > 0;
	ИначеЕсли ТипПоиска = "ЗаканчиваетсяНа" Тогда
		СуффиксПоиска = Прав(СтрокаПоиска, СтрДлина(СтрокаПоиска) - 1); // "*УХ" - надо взять последние символы
		Результат = СтрЗаканчиваетсяНа(ПроверяемаяСтрока, СуффиксПоиска);
	КонецЕсли;
	
	Возврат Результат;
	
КонецФункции

#КонецОбласти

#Область АнализИнформационнойБазы

// Количество элементов коллекции указанного типа объекта метаданных,
// например, сколько записей в справочнике "Номенклатура".
//
// Параметры:
//	ИмяКоллекцииМетаданных - Строка - имя коллекции метаданных. Например: "Справочник".
//	ИмяОбъектаМетаданных - Строка - имя объекта метаданных. Например: "Номенклатура".
//
// Возвращаемое значение:
//	Число.
//	
Функция КоличествоЭлементовКоллекцииТипаОбъектаМетаданных(ИмяКоллекцииМетаданных, ИмяОбъектаМетаданных) Экспорт
	
	Результат = 0;
	ПустойРезультат = 0;
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяКоллекцииМетаданных) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(ИмяОбъектаМетаданных) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	Количество = 0;
	ПолучитьКоличествоЗаписей = Ложь;
	
	Попытка
		Количество = Метаданные[ИмяОбъектаМетаданных].Количество();
	Исключение
		ПолучитьКоличествоЗаписей = Истина;
	КонецПопытки;
	
	Если ПолучитьКоличествоЗаписей Тогда
		
		Запрос = ЗапросКоличестваЭлементовКоллекцииТипаОбъектаМетаданных(ИмяКоллекцииМетаданных, ИмяОбъектаМетаданных);
		
		Попытка
			РезультатЗапроса = Запрос.Выполнить();
		Исключение
			Возврат ПустойРезультат;
		КонецПопытки;
		
		Выборка = РезультатЗапроса.Выбрать();
		Выборка.Следующий();
		
		Количество = Выборка.КоличествоЭлементов;
		
	КонецЕсли;
	
	Результат = Количество;
	
	Возврат Результат;
	
КонецФункции

Процедура ПолучитьКоличествоВсехЭлементовВсехКоллекций(Параметры, АдресХранилищаРезультата = "") Экспорт
	
	АдресДереваМетаданных = Параметры.Свойство("АдресДереваМетаданных");
	
	ИменаКоллекций = Новый Массив;
	ИменаКоллекций.Добавить("Справочники");
	ИменаКоллекций.Добавить("Документы");
	ИменаКоллекций.Добавить("ПланыВидовХарактеристик");
	ИменаКоллекций.Добавить("ПланыСчетов");
	ИменаКоллекций.Добавить("РегистрыСведений");
	ИменаКоллекций.Добавить("РегистрыНакопления");
	ИменаКоллекций.Добавить("РегистрыБухгалтерии");
	ИменаКоллекций.Добавить("РегистрыРасчета");
	ИменаКоллекций.Добавить("Задачи");
	ИменаКоллекций.Добавить("БизнесПроцессы");
	
	дз_ДеревоМетаданных = ПолучитьИзВременногоХранилища(АдресДереваМетаданных);
	УдалитьИзВременногоХранилища(АдресДереваМетаданных);
	
	Для Каждого ИмяКоллекции Из ИменаКоллекций Цикл
		
		НайденныеСтроки = дз_ДеревоМетаданных.Строки.НайтиСтроки(Новый Структура("ИмяКоллекции", ИмяКоллекции), Истина);
		
		Если (НайденныеСтроки.Количество() = 0) Тогда
			Продолжить;
		КонецЕсли;
		
		стр_КоллекцияОбъектовМетаданных = НайденныеСтроки[0].Строки;
		
		Для Каждого стр_СтрокаКоллекции Из стр_КоллекцияОбъектовМетаданных Цикл
			
			стр_СтрокаКоллекции.КоличествоЗаписей = КоличествоЭлементовКоллекцииТипаОбъектаМетаданных(стр_СтрокаКоллекции.ИмяЭлементаКоллекции, стр_СтрокаКоллекции.Имя);
			
			Если стр_СтрокаКоллекции.КоличествоЗаписей = 0 Тогда
				стр_СтрокаКоллекции.Представление = СтрШаблон("%1", стр_СтрокаКоллекции.Имя);
			Иначе
				стр_СтрокаКоллекции.Представление = СтрШаблон("%1 (%2)", стр_СтрокаКоллекции.Имя, стр_СтрокаКоллекции.КоличествоЗаписей);
			КонецЕсли;
			
		КонецЦикла;
		
	КонецЦикла;
	
	ПоместитьВоВременноеХранилище(дз_ДеревоМетаданных, АдресДереваМетаданных);
	АдресХранилищаРезультата = АдресДереваМетаданных;
	
КонецПроцедуры

Функция ЗапросКоличестваЭлементовКоллекцииТипаОбъектаМетаданных(ИмяКоллекцииМетаданных, ИмяОбъектаМетаданных)
	
	Результат = Новый Запрос;
	ПустойРезультат = Неопределено;
	
	ТекстЗапроса = ТекстЗапросаКоличестваЭлементовКоллекцииТипаОбъектаМетаданных(ИмяКоллекцииМетаданных, ИмяОбъектаМетаданных);
	
	Если Не ЗначениеЗаполнено(ТекстЗапроса) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Результат.Текст = ТекстЗапроса;
	
	Возврат Результат;
	
КонецФункции

Функция ТекстЗапросаКоличестваЭлементовКоллекцииТипаОбъектаМетаданных(ИмяКоллекцииМетаданных, ИмяОбъектаМетаданных)
	
	Результат = "";
	ПустойРезультат = "";
	
	ИмяОсновнойТаблицы = ИмяОсновнойТаблицыЭлементовОбъектаМетаданных(ИмяКоллекцииМетаданных, ИмяОбъектаМетаданных);
	
	Если Не ЗначениеЗаполнено(ИмяОсновнойТаблицы) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Результат = СтрШаблон("ВЫБРАТЬ КОЛИЧЕСТВО(*) КАК КоличествоЭлементов ИЗ %1 КАК Т", ИмяОсновнойТаблицы);
	
	Возврат Результат;
	
КонецФункции

#КонецОбласти

#Область ПланыОбмена

&НаСервере
Процедура ЗаполнитьИзмененияНаУзлахОбмена(ОбъектБазы, ДеревоУзловОбмена) Экспорт
	
	МетаданныеОбъекта = ОбъектБазы.Метаданные();
	
	ДеревоУзловОбмена.Строки.Очистить();
	
	Для каждого ПланОбмена Из Метаданные.ПланыОбмена Цикл
		
		Если ПланОбмена.Состав.Найти(МетаданныеОбъекта) = Неопределено Тогда
			Продолжить;
		КонецЕсли;
		
		УзлыПланаОбмена = УзлыПланаОбмена(ПланОбмена.Имя);
		
		Если УзлыПланаОбмена = Неопределено Тогда // ?
			Возврат;
		КонецЕсли;
		
		Если УзлыПланаОбмена.Количество() = 0 Тогда
			Продолжить;
		КонецЕсли;
		
		стр_ПланОбмена = ДеревоУзловОбмена.Строки.Добавить();
		стр_ПланОбмена.Наименование   = ПланОбмена.Имя;
		стр_ПланОбмена.ИндексКартинки = 0; // TODO Переделать на общий индекс картинки
		
		Для каждого стр_УзлыПланаОбмена Из УзлыПланаОбмена Цикл
			
			стр_Узел = стр_ПланОбмена.Строки.Добавить();
			ЗаполнитьЗначенияСвойств(стр_Узел, стр_УзлыПланаОбмена);
			
			стр_Узел.Уровень        = 1; // TODO Переделать на общий индекс картинки
			стр_Узел.ИндексКартинки = 1; // TODO Переделать на общий индекс картинки
			стр_Узел.Пометка        = ОбъектБазыЗарегистрированНаУзлеПланаОбмена(ОбъектБазы, стр_УзлыПланаОбмена.Ссылка);
			
		КонецЦикла;
		
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти 

#Область Методы

Процедура ДобавитьПользователейБазы(СтруктураМетаданных)
	
	ИмяКоллекции = "Пользователи";
	ИмяЭлементаКоллекции = "Пользователь";
	
	НомерКартинки = 49;
	
	стр_Коллекция = СтруктураМетаданных.Строки.Добавить();
	
	стр_Коллекция.ИмяКоллекции         = ИмяКоллекции;
	стр_Коллекция.ИмяЭлементаКоллекции = ИмяЭлементаКоллекции;
	стр_Коллекция.Имя                  = ИмяКоллекции;
	стр_Коллекция.Представление        = ИмяКоллекции;
	стр_Коллекция.Синоним              = ИмяКоллекции;
	стр_Коллекция.НомерКартинки        = НомерКартинки;
	стр_Коллекция.ТипЗаписи            = "КоллекцияОбъектовМетаданных";
	
	ВсеПользователи = ПользователиИнформационнойБазы.ПолучитьПользователей();
	
	Для каждого ПользовательБазы Из ВсеПользователи Цикл
		
		стр_ОбъектМетаданных = стр_Коллекция.Строки.Добавить();
		стр_ОбъектМетаданных.ИмяКоллекции         = ИмяКоллекции;
		стр_ОбъектМетаданных.ИмяЭлементаКоллекции = ИмяЭлементаКоллекции;
		стр_ОбъектМетаданных.Имя                  = ПользовательБазы.Имя;
		стр_ОбъектМетаданных.Представление        = ПользовательБазы.Имя;
		стр_ОбъектМетаданных.Синоним              = ПользовательБазы.ПолноеИмя;
		стр_ОбъектМетаданных.ТипЗаписи            = "ПользовательИнформационнойБазы";
		стр_ОбъектМетаданных.НомерКартинки        = НомерКартинки;
		
	КонецЦикла;
	
	стр_Коллекция.Строки.Сортировать("Имя");
	
КонецПроцедуры

Процедура ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(ОписаниеКоллекции, ИмяКоллекции, ИмяЭлементаКоллекции, СинонимКоллекции, НомерКартинки = 0)
	
	СтрокаТбл = ОписаниеКоллекции.Добавить();
	СтрокаТбл.ИмяКоллекции         = ИмяКоллекции;
	СтрокаТбл.ИмяЭлементаКоллекции = ИмяЭлементаКоллекции;
	СтрокаТбл.СинонимКоллекции     = СинонимКоллекции;
	СтрокаТбл.НомерКартинки        = НомерКартинки;
	
КонецПроцедуры

// Добавляет имя объекта метаданных в перечень корреспондирующих полей регистра бухгалтерии.
//
// Параметры:
//	КоррПоля             - Структура, описание корреспондирующих полей регистра бухгалтерии (См. Тип_КоррПоляРегистраБухгалтерии()). 
//	ИмяПеречня           - Строка, имя перечня полей (например: "Измерения"). 
//	ИмяОбъектаМетаданных - Строка, имя объекта метаданных (например: "Организация").
//
Процедура ЗапомнитьКоррПолеРегистраБухгалтерии(КоррПоля, ИмяПеречня, ИмяОбъектаМетаданных)
	
	Если КоррПоля[ИмяПеречня].Найти(ИмяОбъектаМетаданных) = Неопределено Тогда
		КоррПоля[ИмяПеречня].Добавить(ИмяОбъектаМетаданных);
	КонецЕсли;
	
КонецПроцедуры

Функция ИменаПодчиненныхОбъектов(ИмяОбъекта) Экспорт
	
	Результат = Новый Массив;
	ПустойРезультат = Новый Массив;
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяОбъекта) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	СвязиПоВладельцамСтроки = СвязиПоВладельцам.НайтиСтроки(Новый Структура("ИмяОбъекта", ИмяОбъекта));
	
	Если СвязиПоВладельцамСтроки.Количество() = 0 Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Для каждого стр_СвязиПоВладельцам Из СвязиПоВладельцамСтроки Цикл
		Результат.Добавить(стр_СвязиПоВладельцам.ЯвляетсяВладельцемДля);
	КонецЦикла;
	
	Возврат Результат;
	
КонецФункции

Функция КраткаяИнформацияОКонфигурации() Экспорт
	
	СистемнаяИнформация = Новый СистемнаяИнформация;
	
	Результат = СтрШаблон(
		"%1 (%2), платформа %3", 
		Метаданные.КраткаяИнформация, 
		Метаданные.Версия, 
		СистемнаяИнформация.ВерсияПриложения
	);
	
	Возврат Результат;
	
КонецФункции

// Можно отображать список элементов коллекции.
//
// Параметры:
//	ИмяКоллекции - Строка, имя коллекции объектов метаданных (например: "Справочники").
//
// Возвращаемое значение:
// 	Булево. Истина, отображение списка элементов доступно. Ложь, нет.
//
Функция ОтображениеСпискаЭлементовКоллекцииДоступно(ИмяКоллекции) Экспорт
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяКоллекции) Тогда
		Возврат Ложь;
	КонецЕсли;
	
	#КонецОбласти
	
	Если ИмяКоллекции = "Отчеты" Тогда
		Возврат Ложь;
	ИначеЕсли ИмяКоллекции = "Обработки" Тогда
		Возврат Ложь;
	КонецЕсли;
	
	Возврат Истина;
	
КонецФункции

// Элемент коллекции - это обработка или отчет.
//
// Параметры:
//	ИмяКоллекции - Строка - имя коллекции объектов метаданных, например: "Отчеты", "Обработки".
//
// Возвращаемое значение:
//	Тип: Булево
//	Для элемента коллекции доступно открытие основной формы.
//
Функция ЭлементКоллекцииЯвляетсяСредствомОбработкиДанных(ИмяКоллекции) Экспорт
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяКоллекции) Тогда
		Возврат Ложь;
	КонецЕсли;
	
	#КонецОбласти
	
	Если ИмяКоллекции = "Отчеты" Тогда
		Возврат Истина;
	КонецЕсли;
	
	Если ИмяКоллекции = "Обработки" Тогда
		Возврат Истина;
	КонецЕсли;
	
	Возврат Ложь;
	
КонецФункции

// Определяет имя основной формы объекта - отчета или обработки.
//
// Параметры:
//	СвойстваОбъекта - Структура - свойства объекта, см. Тип_СвойстваОбъектаОбработкиДанных().
//
// Возвращаемое значение:
//	Тип: Строка
//	Имя основной формы объекта обработки данных, например: "Отчет.АА_БанковскиеГарантии.Форма.ФормаОтчета".
//
Функция ИмяОсновнойФормыОбъектаОбработкиДанных(СвойстваОбъекта) Экспорт
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если СвойстваОбъекта = Неопределено Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	ОсновнаяФормаОбработки = Метаданные[СвойстваОбъекта.ИмяКоллекции][СвойстваОбъекта.Имя].ОсновнаяФорма;
	
	Если ОсновнаяФормаОбработки = Неопределено Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	ИмяОсновнойФормы = ОсновнаяФормаОбработки.Имя;
	
	Если ИмяОсновнойФормы = "ФормаОтчета" Тогда
		ПолноеИмяОсновнойФормыОбъекта = СтрШаблон("%1.%2.%3", СвойстваОбъекта.ИмяЭлементаКоллекции, СвойстваОбъекта.Имя, "Форма");
	Иначе
		ПолноеИмяОсновнойФормыОбъекта = СтрШаблон("%1.%2.Форма.%3", СвойстваОбъекта.ИмяЭлементаКоллекции, СвойстваОбъекта.Имя, ИмяОсновнойФормы);
	КонецЕсли;
	
	Результат = ПолноеИмяОсновнойФормыОбъекта;
	
	Возврат Результат;
	
КонецФункции

// Имя основной таблицы элементов объекта метаданных.
//
// Параметры:
//	ИмяКоллекцииМетаданных - Строка, имя коллекции объекта метаданных (например: "Справочник"). 
//	ИмяОбъектаМетаданных   - Строка, имя объекта метаданных (например: "Номенклатура").
//
// Возвращаемое значение:
//	Строка. Имя основной таблицы списка элементов объекта метаданных (например: "Справочник.Номенклатура").
//	
Функция ИмяОсновнойТаблицыЭлементовОбъектаМетаданных(ИмяКоллекцииМетаданных, ИмяОбъектаМетаданных) Экспорт
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяКоллекцииМетаданных) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(ИмяОбъектаМетаданных) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	Результат = СтрШаблон("%1.%2", ИмяКоллекцииМетаданных, ИмяОбъектаМетаданных);
	
	Возврат Результат;
	
КонецФункции

// Структура параметров списка элементов объекта метаданных.
//
// Параметры:
//	ИмяКоллекции - Строка, имя коллекции объектов метаданных (например: "Справочники").
//	ИмяОбъектаМетаданных - Строка, имя объекта метаданных (например: "Номенклатура").
//
// Возвращаемое значение:
//	Структура. Параметры колонок списка элементов, см. Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных().
//
Функция ПараметрыКолонокСпискаЭлементовОбъектаМетаданных(ИмяКоллекции, ИмяОбъектаМетаданных) Экспорт
	
	Результат       = Новый Структура;
	ПустойРезультат = Неопределено;
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяКоллекции) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(ИмяОбъектаМетаданных) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Попытка
		ОбъектМетаданных = Метаданные[ИмяКоллекции][ИмяОбъектаМетаданных];
	Исключение
		Возврат ПустойРезультат;
	КонецПопытки;
	
	#КонецОбласти
	
	Если ИмяКоллекции = "ПланыОбмена" Тогда
		
		// Стандартные реквизиты
		СтандартныеРеквизиты = Новый Массив;
		
		СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Ссылка"];
		
		ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
		СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
		
		Если ОбъектМетаданных.ДлинаКода > 0 Тогда
			
			СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Код"];
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЕсли;
		
		Если ОбъектМетаданных.ДлинаНаименования > 0 Тогда
			
			СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Наименование"];
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЕсли;
		
		// ... остальные стандартные реквизиты.
		Для Каждого СтРеквизит Из ОбъектМетаданных.СтандартныеРеквизиты Цикл
			
			Если СтРеквизит.Имя = "Код" Тогда
				Продолжить;
			КонецЕсли;
			Если СтРеквизит.Имя = "Наименование" Тогда
				Продолжить;
			КонецЕсли;
			Если СтРеквизит.Имя = "Ссылка" Тогда
				Продолжить;
			КонецЕсли;
			
			ВидимостьРеквизита = Истина;
			
			Если СтРеквизит.Имя = "ПометкаУдаления" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Предопределенный" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "ИмяПредопределенныхДанных" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "ЭтоГруппа" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Родитель" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Владелец" Тогда
				ВидимостьРеквизита = Ложь;
			КонецЕсли;
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, ВидимостьРеквизита);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		// Реквизиты
		Реквизиты = Новый Массив;
		
		Для Каждого Реквизит Из ОбъектМетаданных.Реквизиты Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(Реквизит.Имя, Реквизит.Синоним, Реквизит.Комментарий, СтРеквизит.Тип, Ложь);
			Реквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Результат.Вставить("СтандартныеРеквизиты", СтандартныеРеквизиты);
		Результат.Вставить("Реквизиты", Реквизиты);
		
	КонецЕсли;
	
	Если ИмяКоллекции = "Справочники" Тогда
		
		// Стандартные реквизиты.
		
		СтандартныеРеквизиты = Новый Массив;
		
		СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Ссылка"];
		
		ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
		СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
		
		Если ОбъектМетаданных.ДлинаКода > 0 Тогда
			
			СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Код"];
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЕсли;
		
		Если ОбъектМетаданных.ДлинаНаименования > 0 Тогда
			
			СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Наименование"];
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Ложь);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЕсли;
		
		// ... остальные стандартные реквизиты.
		
		Для Каждого СтРеквизит Из ОбъектМетаданных.СтандартныеРеквизиты Цикл
			
			Если СтРеквизит.Имя = "Код" Тогда
				Продолжить;
			КонецЕсли;
			
			Если СтРеквизит.Имя = "Наименование" Тогда
				Продолжить;
			КонецЕсли;
			
			Если СтРеквизит.Имя = "Ссылка" Тогда
				Продолжить;
			КонецЕсли;
			
			ВидимостьРеквизита = Истина;
			
			Если СтРеквизит.Имя = "ПометкаУдаления" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Предопределенный" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "ИмяПредопределенныхДанных" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "ЭтоГруппа" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Родитель" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Владелец" Тогда
				ВидимостьРеквизита = Ложь;
			КонецЕсли;
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, ВидимостьРеквизита);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		// Реквизиты.
		
		Реквизиты = Новый Массив;
		
		Для Каждого Реквизит Из ОбъектМетаданных.Реквизиты Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(Реквизит.Имя, Реквизит.Синоним, Реквизит.Комментарий, Реквизит.Тип, Ложь);
			Реквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Результат.Вставить("СтандартныеРеквизиты", СтандартныеРеквизиты);
		Результат.Вставить("Реквизиты", Реквизиты);
		
	КонецЕсли;
	
	Если ИмяКоллекции = "Перечисления" Тогда
		
		СтандартныеРеквизиты = Новый Массив;
		
		Для Каждого СтРеквизит Из ОбъектМетаданных.СтандартныеРеквизиты Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Результат.Вставить("СтандартныеРеквизиты", СтандартныеРеквизиты);
		
	КонецЕсли;
	
	Если ИмяКоллекции = "Документы" Тогда
		
		// Стандартные реквизиты.
		
		ИменаСтРеквизитов = Новый Массив;
		ИменаСтРеквизитов.Добавить("Ссылка");
		ИменаСтРеквизитов.Добавить("Дата");
		ИменаСтРеквизитов.Добавить("Номер");
		
		СтандартныеРеквизиты = Новый Массив;
		
		Для каждого ИмяСтРеквизита Из ИменаСтРеквизитов Цикл
			
			Если ЕстьСтандартныйРеквизитОбъекта(ИмяСтРеквизита, ОбъектМетаданных) Тогда
				
				СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты[ИмяСтРеквизита];
				
				ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(
					СтРеквизит.Имя, 
					СтРеквизит.Синоним, 
					СтРеквизит.Комментарий, 
					СтРеквизит.Тип, 
					Истина
				);
				
				СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
				
			КонецЕсли;
			
		КонецЦикла;
		
		//
		
		Для Каждого СтРеквизит Из ОбъектМетаданных.СтандартныеРеквизиты Цикл
			
			Если СтРеквизит.Имя = "Номер" Тогда
				Продолжить;
			ИначеЕсли СтРеквизит.Имя = "Дата" Тогда
				Продолжить;
			ИначеЕсли СтРеквизит.Имя = "Ссылка" Тогда
				Продолжить;
			КонецЕсли;
			
			ВидимостьРеквизита = Истина;
			
			Если СтРеквизит.Имя = "ПометкаУдаления" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Проведен" Тогда
				ВидимостьРеквизита = Ложь;
			КонецЕсли;
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, ВидимостьРеквизита);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Реквизиты = Новый Массив;
		
		Для Каждого Реквизит Из ОбъектМетаданных.Реквизиты Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(Реквизит.Имя, Реквизит.Синоним, Реквизит.Комментарий, Реквизит.Тип, Ложь);
			Реквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Результат.Вставить("СтандартныеРеквизиты", СтандартныеРеквизиты);
		Результат.Вставить("Реквизиты", Реквизиты);
		
	КонецЕсли;
	
	Если ИмяКоллекции = "РегистрыБухгалтерии" Тогда
		
		Результат = Новый Структура;
		
		СтандартныеРеквизиты = Новый Массив;
		
		Для Каждого СтРеквизит Из ОбъектМетаданных.СтандартныеРеквизиты Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Измерения = Новый Массив;
		
		Для каждого Измерение Из ОбъектМетаданных["Измерения"] Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(
				Измерение.Имя, 
				Измерение.Синоним, 
				Измерение.Комментарий, 
				Измерение.Тип, 
				Истина
			);
			
			Измерения.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Ресурсы = Новый Массив;
		
		Для каждого Ресурс Из ОбъектМетаданных["Ресурсы"] Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(
				Ресурс.Имя, 
				Ресурс.Синоним, 
				Ресурс.Комментарий, 
				Ресурс.Тип, 
				Истина
			);
			
			Ресурсы.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Реквизиты = Новый Массив;
		
		Для каждого Реквизит Из ОбъектМетаданных["Реквизиты"] Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(
				Реквизит.Имя, 
				Реквизит.Синоним, 
				Реквизит.Комментарий, 
				Реквизит.Тип, 
				Ложь
			);
			
			Реквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		// Счета
		// Виды субконто
		
		// TODO: Взять из формы редактора объекта функцию формирования параметров
		// колонок для регистра бухгалтерии. Вообще, они должны быть универсальными.
		
		Результат.Вставить("СтандартныеРеквизиты", СтандартныеРеквизиты);
		Результат.Вставить("Измерения", Измерения);
		Результат.Вставить("Ресурсы", Ресурсы);
		Результат.Вставить("Реквизиты", Реквизиты);
		
	КонецЕсли;
	
	Если ИмяКоллекции = "РегистрыСведений" Или ИмяКоллекции = "РегистрыНакопления" Или ИмяКоллекции = "РегистрыРасчета" Тогда
		
		Результат = Новый Структура;
		
		СтандартныеРеквизиты = Новый Массив;
		
		Для Каждого СтРеквизит Из ОбъектМетаданных.СтандартныеРеквизиты Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Измерения = Новый Массив;
		
		Для каждого СтРеквизит Из ОбъектМетаданных["Измерения"] Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
			Измерения.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Ресурсы = Новый Массив;
		
		Для каждого СтРеквизит Из ОбъектМетаданных["Ресурсы"] Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
			Ресурсы.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Реквизиты = Новый Массив;
		
		Для каждого СтРеквизит Из ОбъектМетаданных["Реквизиты"] Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Ложь);
			Реквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Перерасчеты = Новый Массив;
		
		Попытка
			
			Для каждого СтРеквизит Из ОбъектМетаданных["Перерасчеты"] Цикл
				
				ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Ложь);
				Реквизиты.Добавить(ПараметрыКолонки);
				
			КонецЦикла;
			
		Исключение
			//
		КонецПопытки;
		
		Результат.Вставить("СтандартныеРеквизиты", СтандартныеРеквизиты);
		Результат.Вставить("Измерения", Измерения);
		Результат.Вставить("Ресурсы", Ресурсы);
		Результат.Вставить("Реквизиты", Реквизиты);
		Результат.Вставить("Перерасчеты", Перерасчеты);
		
	КонецЕсли;
	
	Если ИмяКоллекции = "ЖурналыДокументов" Тогда
		
		СтандартныеРеквизиты = Новый Массив;
		
		СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Дата"];
		ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
		СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
		
		СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Номер"];
		ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
		СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
		
		СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Ссылка"];
		ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
		СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
		
		Для Каждого СтРеквизит Из ОбъектМетаданных.СтандартныеРеквизиты Цикл
			
			ВидимостьРеквизита = Истина;
			
			Если СтРеквизит.Имя = "Номер" Тогда
				Продолжить;
			ИначеЕсли СтРеквизит.Имя = "Дата" Тогда
				Продолжить;
			ИначеЕсли СтРеквизит.Имя = "Ссылка" Тогда
				Продолжить;
			КонецЕсли;
			
			Если СтРеквизит.Имя = "ПометкаУдаления" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Проведен" Тогда
				ВидимостьРеквизита = Ложь;
			КонецЕсли;
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, ВидимостьРеквизита);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Графы = Новый Массив;
		
		Для каждого ГрафаЖурнала Из ОбъектМетаданных["Графы"] Цикл
			
			ТипГрафы = Неопределено;
			
			Попытка
				Для каждого СоставГрафы Из ГрафаЖурнала.Ссылки Цикл
					ТипГрафы = СоставГрафы.Тип;
				КонецЦикла;
			Исключение
				Продолжить;
			КонецПопытки;
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(
				ГрафаЖурнала.Имя, 
				ГрафаЖурнала.Синоним, 
				ГрафаЖурнала.Комментарий, 
				ТипГрафы, 
				Истина
			);
			
			Графы.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Результат.Вставить("СтандартныеРеквизиты", СтандартныеРеквизиты);
		Результат.Вставить("Графы", Графы);
		
	КонецЕсли;
	
	Если ИмяКоллекции = "ПланыСчетов" Тогда
		
		СтандартныеРеквизиты = Новый Массив;
		
		СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Ссылка"];
		
		ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
		СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
		
		Если ОбъектМетаданных.ДлинаКода > 0 Тогда
			
			СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Код"];
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЕсли;
		
		Если ОбъектМетаданных.ДлинаНаименования > 0 Тогда
			
			СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Наименование"];
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЕсли;
		
		Для Каждого СтРеквизит Из ОбъектМетаданных.СтандартныеРеквизиты Цикл
			
			Если СтРеквизит.Имя = "Ссылка" Тогда
				Продолжить;
			КонецЕсли;
			
			Если СтРеквизит.Имя = "Код" Тогда
				Продолжить;
			КонецЕсли;
			
			Если СтРеквизит.Имя = "Наименование" Тогда
				Продолжить;
			КонецЕсли;
			
			ВидимостьРеквизита = Истина;
			
			Если СтРеквизит.Имя = "ПометкаУдаления" Тогда
				ВидимостьРеквизита = Ложь;
			КонецЕсли;
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, ВидимостьРеквизита);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Реквизиты = Новый Массив;
		
		Для Каждого Реквизит Из ОбъектМетаданных.Реквизиты Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(Реквизит.Имя, Реквизит.Синоним, Реквизит.Комментарий, Реквизит.Тип, Ложь);
			Реквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Результат.Вставить("СтандартныеРеквизиты", СтандартныеРеквизиты);
		Результат.Вставить("Реквизиты", Реквизиты);
		
	КонецЕсли;
	
	Если ИмяКоллекции = "ПланыВидовРасчета" Тогда
		
		СтандартныеРеквизиты = Новый Массив;
		
		Если ОбъектМетаданных.ДлинаКода > 0 Тогда
			
			СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Код"];
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЕсли;
		
		СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Ссылка"];
		
		ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
		СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
		
		Если ОбъектМетаданных.ДлинаНаименования > 0 Тогда
			СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Наименование"];
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Ложь);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
		КонецЕсли;
		
		Для Каждого СтРеквизит Из ОбъектМетаданных.СтандартныеРеквизиты Цикл
			
			Если СтРеквизит.Имя = "Код" Тогда
				Продолжить;
			КонецЕсли;
			
			Если СтРеквизит.Имя = "Наименование" Тогда
				Продолжить;
			КонецЕсли;
			
			Если СтРеквизит.Имя = "Ссылка" Тогда
				Продолжить;
			КонецЕсли;
			
			ВидимостьРеквизита = Истина;
			
			Если СтРеквизит.Имя = "ПометкаУдаления" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Предопределенный" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "ИмяПредопределенныхДанных" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "ЭтоГруппа" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Родитель" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Владелец" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "ПериодДействияБазовый" Тогда
				ВидимостьРеквизита = Ложь;
			КонецЕсли;
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, ВидимостьРеквизита);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Реквизиты = Новый Массив;
		
		Для Каждого Реквизит Из ОбъектМетаданных.Реквизиты Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(Реквизит.Имя, Реквизит.Синоним, Реквизит.Комментарий, СтРеквизит.Тип, Ложь);
			Реквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Результат.Вставить("СтандартныеРеквизиты", СтандартныеРеквизиты);
		Результат.Вставить("Реквизиты", Реквизиты);
		
	КонецЕсли;
	
	Если ИмяКоллекции = "ПланыВидовХарактеристик" Тогда
		
		СтандартныеРеквизиты = Новый Массив;
		
		СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Ссылка"];
		
		ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
		СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
		
		Если ОбъектМетаданных.ДлинаКода > 0 Тогда
			
			СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Код"];
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЕсли;
		
		Если ОбъектМетаданных.ДлинаНаименования > 0 Тогда
			
			СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Наименование"];
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Ложь);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЕсли;
		
		Для Каждого СтРеквизит Из ОбъектМетаданных.СтандартныеРеквизиты Цикл
			
			Если СтРеквизит.Имя = "Код" Тогда
				Продолжить;
			КонецЕсли;
			
			Если СтРеквизит.Имя = "Наименование" Тогда
				Продолжить;
			КонецЕсли;
			
			Если СтРеквизит.Имя = "Ссылка" Тогда
				Продолжить;
			КонецЕсли;
			
			ВидимостьРеквизита = Истина;
			
			Если СтРеквизит.Имя = "ПометкаУдаления" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Предопределенный" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "ИмяПредопределенныхДанных" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "ЭтоГруппа" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Родитель" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Владелец" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "ТипЗначения" Тогда
				ВидимостьРеквизита = Ложь;
			КонецЕсли;
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, ВидимостьРеквизита);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Реквизиты = Новый Массив;
		
		Для Каждого Реквизит Из ОбъектМетаданных.Реквизиты Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(Реквизит.Имя, Реквизит.Синоним, Реквизит.Комментарий, Реквизит.Тип, Ложь);
			Реквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Результат.Вставить("СтандартныеРеквизиты", СтандартныеРеквизиты);
		Результат.Вставить("Реквизиты", Реквизиты);
		
	КонецЕсли;
	
	Если ИмяКоллекции = "Задачи" Тогда
		
		СтандартныеРеквизиты = Новый Массив;
		
		СтРеквизит = ОбъектМетаданных.СтандартныеРеквизиты["Ссылка"];
		
		ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, Истина);
		СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
		
		Для Каждого СтРеквизит Из ОбъектМетаданных.СтандартныеРеквизиты Цикл
			
			Если СтРеквизит.Имя = "Ссылка" Тогда
				Продолжить;
			КонецЕсли;
			
			ВидимостьРеквизита = Истина;
			
			Если СтРеквизит.Имя = "ПометкаУдаления" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Предопределенный" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "ИмяПредопределенныхДанных" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "ЭтоГруппа" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Родитель" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Владелец" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Выполнена" Тогда
				ВидимостьРеквизита = Ложь;
			ИначеЕсли СтРеквизит.Имя = "Наименование" Тогда
				ВидимостьРеквизита = Ложь;
			КонецЕсли;
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, ВидимостьРеквизита);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Реквизиты = Новый Массив;
		
		Для Каждого Реквизит Из ОбъектМетаданных.Реквизиты Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(Реквизит.Имя, Реквизит.Синоним, Реквизит.Комментарий, Реквизит.Тип, Ложь);
			Реквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		РеквизитыАдресации = Новый Массив;
		
		Для Каждого Реквизит Из ОбъектМетаданных.РеквизитыАдресации Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(Реквизит.Имя, Реквизит.Синоним, Реквизит.Комментарий, Реквизит.Тип, Ложь);
			РеквизитыАдресации.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Результат.Вставить("СтандартныеРеквизиты", СтандартныеРеквизиты);
		Результат.Вставить("Реквизиты", Реквизиты);
		Результат.Вставить("РеквизитыАдресации", РеквизитыАдресации);
		
	КонецЕсли;
	
	Если ИмяКоллекции = "БизнесПроцессы" Тогда
		
		СтандартныеРеквизиты = Новый Массив;
		
		Для Каждого СтРеквизит Из ОбъектМетаданных.СтандартныеРеквизиты Цикл
			
			ВидимостьРеквизита = Истина;
			
			Если СтРеквизит.Имя = "ПометкаУдаления" Тогда
				ВидимостьРеквизита = Ложь;
			КонецЕсли;
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(СтРеквизит.Имя, СтРеквизит.Синоним, СтРеквизит.Комментарий, СтРеквизит.Тип, ВидимостьРеквизита);
			СтандартныеРеквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Реквизиты = Новый Массив;
		
		Для Каждого Реквизит Из ОбъектМетаданных.Реквизиты Цикл
			
			ПараметрыКолонки = Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(Реквизит.Имя, Реквизит.Синоним, Реквизит.Комментарий, Реквизит.Тип, Ложь);
			Реквизиты.Добавить(ПараметрыКолонки);
			
		КонецЦикла;
		
		Результат.Вставить("СтандартныеРеквизиты", СтандартныеРеквизиты);
		Результат.Вставить("Реквизиты", Реквизиты);
		
	КонецЕсли;
	
	Возврат Результат;
	
КонецФункции

// Возвращает массив имен табличных частей объекта метаданных.
//
// Параметры:
//	ОбъектМетаданных - ОбъектМетаданных, объект метаданных конфигурации.
//
// Возвращаемое значение:
//	Массив. Массив элементов типа Строка, имена табличных чатей объекта метаданных.
//	
Функция ИменаТабличныхЧастейОбъектаМетаданных(ОбъектМетаданных) Экспорт
	
	Результат = Новый Массив;
	ПустойРезультат = Новый Массив;
	
	#Область Предусловия
	
	Если ОбъектМетаданных = Неопределено Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Попытка
		ТабличныеЧастиОбъекта = ОбъектМетаданных.ТабличныеЧасти;
	Исключение
		Возврат ПустойРезультат;
	КонецПопытки;
	
	#КонецОбласти
	
	Для Каждого ТабличнаяЧастьОбъекта Из ОбъектМетаданных.ТабличныеЧасти Цикл
		
		Результат.Добавить(ТабличнаяЧастьОбъекта.Имя);
		
	КонецЦикла;
	
	Возврат Результат;
	
КонецФункции

// Полное имя указанной табличной части переданного объекта метаданных.
//
// Параметры:
//	ОбъектМетаданных - ОбъектМетаданных, метаданные объекта.
//	ИмяТабличнойЧасти - Строка, имя табличной части объекта метаданных (например: "Товары").
//
// Возвращаемое значение:
//	Строка. Полное имя табличной части объекта метаданных (например: "Документ.ПриходнаяНакладная.Товары").
// 			 
Функция ПолноеИмяТабличнойЧастиОбъектаМетаданных(ОбъектМетаданных, ИмяТабличнойЧасти) Экспорт
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если (ОбъектМетаданных = Неопределено) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	ИмяТипаОбъекта = ИмяТипаОбъектаМетаданных(ОбъектМетаданных);
	
	Если (Не ЗначениеЗаполнено(ИмяТипаОбъекта)) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Результат = СтрШаблон("%1.%2.%3", ИмяТипаОбъекта, ОбъектМетаданных.Имя, ИмяТабличнойЧасти);
	
	Возврат Результат;
	
КонецФункции

Функция ПредставлениеТипаОбъектаКонфигурации(ОбъектКонфигурации) Экспорт
	
	Результат       = "";
	ПустойРезультат = "";
	
	ИмяТипа         = "";
	
	Попытка
		ОбъектМетаданных = ОбъектКонфигурации.Метаданные();
	Исключение
		Возврат ПустойРезультат;
	КонецПопытки;
	
	Если ЭтоСправочник(ОбъектМетаданных) Тогда
		ИмяТипа = "Справочник";
	ИначеЕсли ЭтоДокумент(ОбъектМетаданных) Тогда
		ИмяТипа = "Документ";
	ИначеЕсли ЭтоПеречисление(ОбъектМетаданных) Тогда
		ИмяТипа = "Перечисление";
	ИначеЕсли ЭтоБизнесПроцесс(ОбъектМетаданных) Тогда
		ИмяТипа = "БизнесПроцесс";
	ИначеЕсли ЭтоЗадача(ОбъектМетаданных) Тогда
		ИмяТипа = "Задача";
	ИначеЕсли ЭтоПланОбмена(ОбъектМетаданных) Тогда
		ИмяТипа = "ПланОбмена";
	ИначеЕсли ЭтоПланВидовХарактеристик(ОбъектМетаданных) Тогда
		ИмяТипа = "ПланВидовХарактеристик";
	ИначеЕсли ЭтоПланСчетов(ОбъектМетаданных) Тогда
		ИмяТипа = "ПланСчетов";
	ИначеЕсли ЭтоВнешнийИсточникДанных(ОбъектМетаданных) Тогда
		ИмяТипа = "ВнешнийИсточникДанных";
	ИначеЕсли ЭтоРегистрСведений(ОбъектМетаданных) Тогда
		ИмяТипа = "РегистрСведений";
	ИначеЕсли ЭтоРегистрНакопления(ОбъектМетаданных) Тогда
		ИмяТипа = "РегистрНакопления";
	ИначеЕсли ЭтоРегистрБухгалтерии(ОбъектМетаданных) Тогда
		ИмяТипа = "РегистрБухгалтерии";
	ИначеЕсли ЭтоРегистрРасчета(ОбъектМетаданных) Тогда
		ИмяТипа = "РегистрРасчета";
	ИначеЕсли ЭтоРегламентноеЗадание(ОбъектМетаданных) Тогда
		ИмяТипа = "РегламентноеЗадание";
	КонецЕсли;
	
	ИмяОбъектаМетаданных = ОбъектМетаданных.Имя;
	
	Результат = СтрШаблон("%1.%2", ИмяТипа, ИмяОбъектаМетаданных);
	
	Возврат Результат;
	
КонецФункции

Функция МетаданныеПользователяИнформационнойБазы() Экспорт
	
	Результат = Новый Массив;
	
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("АутентификацияOpenID"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("АутентификацияОС"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("АутентификацияСтандартная"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("ЗапрещеноИзменятьПароль"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("ЗащитаОтОпасныхДействий"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("Имя"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("ОсновнойИнтерфейс"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("Пароль"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("ПарольУстановлен"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("ПоказыватьВСпискеВыбора"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("ПолноеИмя"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("ПользовательОС"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("РазделениеДанных"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("РежимЗапуска"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("Роли"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("СохраняемоеЗначениеПароля"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("УникальныйИдентификатор"));
	Результат.Добавить(Тип_СвойстваПользователяИнформационнойБазы("Язык"));
	
	Возврат Результат;
	
КонецФункции

Функция НомерКартинки(ТипОбъекта) Экспорт
	
	Результат = 0;
	ПустойРезультат = 0;
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ТипОбъекта) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	Попытка
		Результат = м_СоответствиеКартинок.Получить(ТипОбъекта)
	Исключение
		Результат = 0;
	КонецПопытки;
	
	Возврат Результат;
	
КонецФункции

// Возвращает строку описания типов.
//
// Параметры:
//	Тип - ОписаниеТипов - описание типов.
//
// Возвращаемое значение:
//	Тип значения: Строка
//	Представление описания типов (например: "Справочник.Номенклатура;Справочник.ХарактеристикиНоменклатуры").
//
Функция СтрокаОписанияТипов(Тип) Экспорт
	
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(Тип) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	СтрокаОписания = "";
	
	Типы = Тип.Типы();
	
	Если Типы.Количество() = 1 Тогда
		
		УдалитьПоследнийРазделитель = Ложь;
		
		ТипЗначения = Типы[0];
		
		Если ТипЗначения = ТипЗнч("") Тогда
			СтрокаОписания = СтрШаблон("Строка (%1,%2)", Тип.КвалификаторыСтроки.Длина, ?(Тип.КвалификаторыСтроки.ДопустимаяДлина = ДопустимаяДлина.Переменная, "*", ""));
		ИначеЕсли ТипЗначения = ТипЗнч(0) Тогда
			СтрокаОписания = СтрШаблон("Число (%1,%2,%3)", Тип.КвалификаторыЧисла.Разрядность, Тип.КвалификаторыЧисла.РазрядностьДробнойЧасти, ?(Тип.КвалификаторыЧисла.ДопустимыйЗнак = ДопустимыйЗнак.Любой, "+-", "+"));
		ИначеЕсли ТипЗначения = ТипЗнч(Истина) Тогда
			СтрокаОписания = "Булево";
		ИначеЕсли ТипЗначения = ТипЗнч('00010101') Тогда
			СтрокаОписания = СтрШаблон("Дата (%1)", ?(Тип.КвалификаторыДаты.ЧастиДаты = ЧастиДаты.Дата, "Д", ?(Тип.КвалификаторыДаты.ЧастиДаты = ЧастиДаты.Время, "В", "Д+В")));
		Иначе
			
			МетаданныеТипаРеквизита = Метаданные.НайтиПоТипу(ТипЗначения);
			
			Если Не (МетаданныеТипаРеквизита = Неопределено) Тогда
				
				ПолноеИмяТипа = МетаданныеТипаРеквизита.ПолноеИмя();
				ПредставлениеТипа = ПолноеИмяТипа;
				
				СтрокаОписания = ПредставлениеТипа;
				
			Иначе
				
				СтрокаОписания = Строка(ТипЗначения);
				
			КонецЕсли;
			
		КонецЕсли;
		
	Иначе
		
		УдалитьПоследнийРазделитель = Истина;
		
		Для каждого ТипЗначения Из Типы Цикл
			
			МетаданныеТипаРеквизита = Метаданные.НайтиПоТипу(ТипЗначения);
			
			Если Не (МетаданныеТипаРеквизита = Неопределено) Тогда
				
				ПолноеИмяТипа = МетаданныеТипаРеквизита.ПолноеИмя();
				ПредставлениеТипа = ПолноеИмяТипа;
				
				СтрокаОписания = СтрокаОписания + ПредставлениеТипа + ";";
				
			ИначеЕсли ТипЗначения = ТипЗнч("") Тогда
				СтрокаОписания = СтрокаОписания
				+ СтрШаблон("Строка (%1,%2)", Тип.КвалификаторыСтроки.Длина, ?(Тип.КвалификаторыСтроки.ДопустимаяДлина = ДопустимаяДлина.Переменная, "*", ""))
				+ ";";
			ИначеЕсли ТипЗначения = ТипЗнч(0) Тогда
				СтрокаОписания = СтрокаОписания
				+ СтрШаблон("Число (%1,%2,%3)", Тип.КвалификаторыЧисла.Разрядность, Тип.КвалификаторыЧисла.РазрядностьДробнойЧасти, ?(Тип.КвалификаторыЧисла.ДопустимыйЗнак = ДопустимыйЗнак.Любой, "+-", "+"))
				+ ";";
			ИначеЕсли ТипЗначения = ТипЗнч(Истина) Тогда
				СтрокаОписания = СтрокаОписания + "Булево" + ";";
			ИначеЕсли ТипЗначения = ТипЗнч('00010101') Тогда
				СтрокаОписания = СтрокаОписания
				+ СтрШаблон("Дата (%1)", ?(Тип.КвалификаторыДаты.ЧастиДаты = ЧастиДаты.Дата, "Д", ?(Тип.КвалификаторыДаты.ЧастиДаты = ЧастиДаты.Время, "В", "Д+В")))
				+ ";";
			Иначе
				
				СтрокаОписания = СтрокаОписания + Строка(ТипЗначения) + ";";
				
			КонецЕсли;
			
		КонецЦикла;
		
	КонецЕсли;
	
	Если УдалитьПоследнийРазделитель Тогда
		СтрокаОписания = Лев(СтрокаОписания, СтрДлина(СтрокаОписания) - 1);
	КонецЕсли;
	
	Возврат СтрокаОписания;
	
КонецФункции

// Менеджер объектов базы по указанному в строке определителю.
//
// Параметры:
//	ОпределительТипаЭлементов - Строка, тип элемент (например: "Справочник.Номенклатура").
//
// Возвращаемое значение:
//	МенеджерОбъектов. Менеджер объектов элементов базы, например: Справочники.Номенклатура.
//
Функция МенеджерОбъектовБазы(ОпределительТипаЭлементов) Экспорт
	
	Результат = Неопределено;
	ПустойРезультат = Неопределено;
	
	#Область Предусловия
	
	Если Не (ЗначениеЗаполнено(ОпределительТипаЭлементов)) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	ЧастиСтроки = СтрРазделить(ОпределительТипаЭлементов, ".", Ложь);
	
	Если (ЧастиСтроки.Количество() < 2) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	ИмяСвойстваГК = ИмяСвойстваГлобальногоКонтекста(ЧастиСтроки[0]); // "Справочник"
	
	Если Не ЗначениеЗаполнено(ИмяСвойстваГК) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	ТекстВыражения = СтрШаблон("Результат = %1.%2", ИмяСвойстваГК, ЧастиСтроки[1]); // "Номенклатура"
	
	Выполнить ТекстВыражения;
	
	Возврат Результат;
	
КонецФункции

// Получает ссылку на элемент базы по адресу.
//
// Параметры:
//	АдресСсылки - Строка, навигационная ссылка или строка GUID с адресом элемента.
//	ОпределительТипаЭлементов - Строка, определитель тип элемента (например: "Справочник.Номенклатура").
//
// Возвращаемое значение:
//	ЛюбаяСсылка. Ссылка не элемент информационной базы.
//
Функция ПолучитьСсылкуНаЭлементБазыПоАдресу(АдресСсылки, ОпределительТипаЭлементов = "") Экспорт
	
	Результат = Неопределено;
	ПустойРезультат = Неопределено;
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(АдресСсылки) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	ЭтоНавигационнаяСсылка = ЭтоНавигационнаяСсылка(АдресСсылки);
	
	Если ЭтоНавигационнаяСсылка Тогда
		Результат = ПолучитьСсылкуНаЭлементИзНавигационнойСсылки(АдресСсылки);
	Иначе
		Результат = ПолучитьСсылкуНаЭлементПоИдентификатору(АдресСсылки, ОпределительТипаЭлементов);
	КонецЕсли; 
	
	Возврат Результат;
	
КонецФункции

// Получает ссылку на элемент информационной базы по строке GUID.
//
// Параметры:
//	СтрокаGUID - Строка, строка GUID для формирования уникального идентификтора (например: "1db01014-7c2a-11e7-80ed-00505699065d"). 
//	ОпределительТипаЭлементов - Строка, определитель тип элемента (например: "Справочник.Номенклатура").
//
// Возвращаемое значение:
//	ЛюбаяСсылка. Ссылка не элемент информационной базы.
//
Функция ПолучитьСсылкуНаЭлементПоИдентификатору(СтрокаGUID, ОпределительТипаЭлементов) Экспорт
	
	Результат = Неопределено;
	ПустойРезультат = Неопределено;
	
	#Область Предусловия
	
	Если Не (ЗначениеЗаполнено(СтрокаGUID)) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Если Не (ЗначениеЗаполнено(ОпределительТипаЭлементов)) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	МенеджерОбъектовИБ = МенеджерОбъектовБазы(ОпределительТипаЭлементов);
	
	Если (МенеджерОбъектовИБ = Неопределено) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Попытка
		УникальныйИд = Новый УникальныйИдентификатор(СтрокаGUID);
	Исключение
		Возврат ПустойРезультат;
	КонецПопытки;
	
	#КонецОбласти
	
	СсылкаНаЭлемент = МенеджерОбъектовИБ.ПолучитьСсылку(УникальныйИд);
	
	Результат = СсылкаНаЭлемент;
	Возврат Результат;
	
КонецФункции

// Получает ссылку на элемент информационной базы по навигационной ссылке.
//
// Параметры:
//	НавигационнаяСсылка - Строка, навигационная ссылка (например: "e1cib/data/Справочник.Контрагенты?ref=80ed00505699065d11e77c2a1db01014").
//
// Возвращаемое значение:
//	ЛюбаяСсылка. Ссылка на элемент информационной базы.
//
Функция ПолучитьСсылкуНаЭлементИзНавигационнойСсылки(НавигационнаяСсылка) Экспорт
	
	Результат = Неопределено;
	ПустойРезультат = Неопределено;
	
	#Область Предусловия
	
	Если (Не ЗначениеЗаполнено(НавигационнаяСсылка)) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	ПерваяТочка = Найти(НавигационнаяСсылка, "e1cib/data/");
	ВтораяТочка = Найти(НавигационнаяСсылка, "?ref=");
	
	ПредставлениеТипа = Сред(НавигационнаяСсылка, ПерваяТочка + 11, ВтораяТочка
		- ПерваяТочка - 11);
		ШаблонЗначения = ЗначениеВСтрокуВнутр(ПредопределенноеЗначение(ПредставлениеТипа
		+ ".ПустаяСсылка")
	);
	
	ЗначениеСсылкиСтрокой = СтрЗаменить(ШаблонЗначения, "00000000000000000000000000000000", Сред(НавигационнаяСсылка, ВтораяТочка + 5));
	
	СсылкаНаЭлемент = ЗначениеИзСтрокиВнутр(ЗначениеСсылкиСтрокой);
	
	//
	Результат = СсылкаНаЭлемент;
	Возврат Результат;
	
КонецФункции

Функция НомерКартинкиДляТипаОбъекта(ТипОбъекта) Экспорт
	
	Результат = 0;
	ПустойРезультат = Неопределено;
	
	#Область Предусловия
	
	Если (Не ЗначениеЗаполнено(ТипОбъекта)) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	Результат = м_СоответствиеКартинок.Получить(ТипОбъекта);
	
	Возврат Результат;
	
КонецФункции

// Максимальное количество субконто плана счетов регистра бухгалтерии.
//
// Параметры:
//	ИмяРегистраБухгалтерии - Строка, имя регистра бухгалтерии (например: "Хозрасчетный").
//
// Возвращаемое значение:
//	Число. Максимальное количество субконто.  
//
Функция МаксКоличествоСубконтоРегистраБухгалтерии(ИмяРегистраБухгалтерии) Экспорт
	
	Результат = 0;
	ПустойРезультат = 0;
	
	#Область Предусловия
	
	Если (Не ЗначениеЗаполнено(ИмяРегистраБухгалтерии)) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	Попытка
		МетаданныеРегистра = Метаданные.РегистрыБухгалтерии[ИмяРегистраБухгалтерии];
	Исключение
		Возврат ПустойРезультат;
	КонецПопытки;
	
	Попытка
		Результат = МетаданныеРегистра.ПланСчетов.МаксКоличествоСубконто;
	Исключение
		Возврат ПустойРезультат;
	КонецПопытки;
	
	Возврат Результат;
	
КонецФункции

// Формирует структуру описания корреспондирующих полей регистра бухгалтерии.
//
// Параметры:
//	ИмяРегистраБухгалтерии - Строка, имя регистра бухгалтерии (например: "Хозрасчетный").
//
// Возвращаемое значение:
//	Структура. Описание корреспондирующих полей регистра бухгалтерии (См. Тип_КоррПоляРегистраБухгалтерии()).  
//
Функция ПоляРегистраБухгалтерииДтКт(ИмяРегистраБухгалтерии) Экспорт
	
	Результат = Тип_ПоляРегистраБухгалтерииДтКт();
	ПустойРезультат = Тип_ПоляРегистраБухгалтерииДтКт();
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяРегистраБухгалтерии) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Попытка
		МетаданныеРегистра = Метаданные.РегистрыБухгалтерии[ИмяРегистраБухгалтерии];
	Исключение
		Возврат ПустойРезультат;
	КонецПопытки;
	
	Если Не МетаданныеРегистра.Корреспонденция Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	// Измерения.
	Для каждого Измерение Из МетаданныеРегистра.Измерения Цикл
		
		Если Не (Измерение.ПризнакУчета = Неопределено)
			Или Не Измерение.Балансовый Тогда
			ЗапомнитьКоррПолеРегистраБухгалтерии(Результат, "Измерения", Измерение.Имя);
		КонецЕсли;
		
	КонецЦикла;
	
	// Ресурсы.
	Для каждого Ресурс Из МетаданныеРегистра.Ресурсы Цикл
		
		Если Не (Ресурс.ПризнакУчета = Неопределено) Или Не Ресурс.Балансовый Тогда
			ЗапомнитьКоррПолеРегистраБухгалтерии(Результат, "Ресурсы", Ресурс.Имя);
			
		КонецЕсли;
		
	КонецЦикла;
	
	// Счета
	Попытка
		ПланСчетовРегистра = МетаданныеРегистра.ПланСчетов;
	Исключение
		ПланСчетовРегистра = Неопределено;
	КонецПопытки;
	
	Если Не (ПланСчетовРегистра = Неопределено) Тогда
		Если (МетаданныеРегистра.Корреспонденция) Тогда
			Результат.Счета.Добавить(Новый Структура("ИмяРеквизитаСчета, ТипСчета", "СчетДт", Новый ОписаниеТипов("ПланСчетовСсылка."
			+ ПланСчетовРегистра.Имя)));
			Результат.Счета.Добавить(Новый Структура("ИмяРеквизитаСчета, ТипСчета", "СчетКт", Новый ОписаниеТипов("ПланСчетовСсылка."
			+ ПланСчетовРегистра.Имя)));
		Иначе
			Результат.Счета.Добавить(Новый Структура("ИмяРеквизитаСчета, ТипСчета", "Счет", Новый ОписаниеТипов("ПланСчетовСсылка."
			+ ПланСчетовРегистра.Имя)));
		КонецЕсли;
	КонецЕсли;
	
	// Количество видов субконто.
	Результат.МаксКоличествоСубконто = МаксКоличествоСубконтоРегистраБухгалтерии(ИмяРегистраБухгалтерии);
	
	Возврат Результат;
	
КонецФункции

Функция ИменаСвойствОбъектаБазы(ОпределительОбъекта, ИмяОбъектаБазы = "") Экспорт
	
	Результат = Новый Массив;
	
	Если ОпределительОбъекта = "СистемнаяИнформация" Тогда
		
		Результат.Добавить("ВерсияОС");
		Результат.Добавить("ВерсияПриложения");
		Результат.Добавить("ИдентификаторКлиента");
		Результат.Добавить("ИнформацияПрограммыПросмотра");
		Результат.Добавить("ОперативнаяПамять");
		Результат.Добавить("Процессор");
		Результат.Добавить("ТипПлатформы");
		
	ИначеЕсли ОпределительОбъекта = "Конфигурация" Тогда
		
		Результат.Добавить("АвторскиеПрава");
		Результат.Добавить("АдресИнформацииОКонфигурации");
		Результат.Добавить("АдресИнформацииОПоставщике");
		Результат.Добавить("АдресКаталогаОбновлений");
		Результат.Добавить("ВариантВстроенногоЯзыка");
		Результат.Добавить("Версия");
		Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("Имя");
		Результат.Добавить("ИнтерфейсКлиентскогоПриложения");
		Результат.Добавить("ИспользоватьОбычныеФормыВУправляемомПриложении");
		Результат.Добавить("ИспользоватьУправляемыеФормыВОбычномПриложении");
		Результат.Добавить("КартинкаОсновногоРаздела");
		Результат.Добавить("Комментарий");
		Результат.Добавить("КраткаяИнформация");
		Результат.Добавить("Логотип");
		Результат.Добавить("ОсновнойРежимЗапуска");
		Результат.Добавить("ОсновнойЯзык");
		Результат.Добавить("ПодробнаяИнформация");
		Результат.Добавить("Поставщик");
		Результат.Добавить("ПрефиксИмен");
		Результат.Добавить("РежимСовместимости");
		Результат.Добавить("РежимСовместимостиИнтерфейса");
		Результат.Добавить("РежимСовместимостиРасширенияКонфигурации");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		Результат.Добавить("Синоним");
		
	ИначеЕсли ОпределительОбъекта = "Подсистема" Тогда
		
		Результат.Добавить("ВключатьВКомандныйИнтерфейс");
		Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("Имя");
		Результат.Добавить("Картинка");
		Результат.Добавить("КомандныйИнтерфейс");
		Результат.Добавить("Комментарий");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("Синоним");
		
	ИначеЕсли ОпределительОбъекта = "ОбщийМодуль" Тогда
		
		Результат.Добавить("ВнешнееСоединение");
		Результат.Добавить("ВызовСервера");
		Результат.Добавить("Глобальный");
		Результат.Добавить("Имя");
		Результат.Добавить("КлиентОбычноеПриложение");
		Результат.Добавить("КлиентУправляемоеПриложение");
		Результат.Добавить("Комментарий");
		Результат.Добавить("Модуль");
		Результат.Добавить("ПовторноеИспользованиеВозвращаемыхЗначений");
		Результат.Добавить("Привилегированный");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("Сервер");
		Результат.Добавить("Синоним");
		
	ИначеЕсли ОпределительОбъекта = "ПараметрСеанса" Тогда
		
		Результат.Добавить("Имя");
		Результат.Добавить("Комментарий");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("Синоним");
		
	ИначеЕсли ОпределительОбъекта = "Роль" Тогда
		
		Результат.Добавить("Имя");
		Результат.Добавить("Комментарий");
		Результат.Добавить("Права");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("Синоним");
		
	ИначеЕсли ОпределительОбъекта = "ОбщийРеквизит" Тогда
		
		Результат.Добавить("АвтоИспользование");
		Результат.Добавить("БыстрыйВыбор");
		Результат.Добавить("ВыборГруппИЭлементов");
		Результат.Добавить("ВыделятьОтрицательные");
		Результат.Добавить("ЗаполнятьИзДанныхЗаполнения");
		Результат.Добавить("ЗначениеЗаполнения");
		Результат.Добавить("ЗначениеРазделенияДанных");
		Результат.Добавить("Имя");
		Результат.Добавить("Индексирование");
		Результат.Добавить("ИспользованиеРазделенияДанных");
		Результат.Добавить("ИспользованиеРазделяемыхДанных");
		Результат.Добавить("ИсторияВыбораПриВводе");
		Результат.Добавить("Комментарий");
		Результат.Добавить("МаксимальноеЗначение");
		Результат.Добавить("Маска");
		Результат.Добавить("МинимальноеЗначение");
		Результат.Добавить("МногострочныйРежим");
		//Результат.Добавить("ПараметрыВыбора");
		Результат.Добавить("Подсказка");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("ПроверкаЗаполнения");
		Результат.Добавить("РазделениеАутентификации");
		Результат.Добавить("РазделениеДанных");
		Результат.Добавить("РазделениеПользователей");
		Результат.Добавить("РазделениеРасширенийКонфигурации");
		Результат.Добавить("РасширенноеРедактирование");
		Результат.Добавить("РежимПароля");
		//Результат.Добавить("СвязиПараметровВыбора");
		//Результат.Добавить("СвязьПоТипу");
		Результат.Добавить("Синоним");
		Результат.Добавить("СозданиеПриВводе");
		//Результат.Добавить("Состав");
		Результат.Добавить("Тип");
		Результат.Добавить("УсловноеРазделение");
		//Результат.Добавить("ФормаВыбора");
		Результат.Добавить("Формат");
		Результат.Добавить("ФорматРедактирования");
		
	ИначеЕсли ОпределительОбъекта = "ПланОбмена" Тогда
		
		Результат.Добавить("БыстрыйВыбор");
		Результат.Добавить("ВводПоСтроке");
		//Результат.Добавить("ВводитсяНаОсновании");
		Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("ДлинаКода");
		Результат.Добавить("ДлинаНаименования");
		//Результат.Добавить("ДополнительнаяФормаДляВыбора");
		//Результат.Добавить("ДополнительнаяФормаОбъекта");
		//Результат.Добавить("ДополнительнаяФормаСписка");
		Результат.Добавить("ДопустимаяДлинаКода");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		Результат.Добавить("ИсторияВыбораПриВводе");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		//Результат.Добавить("Макеты");
		//Результат.Добавить("МодульМенеджера");
		//Результат.Добавить("МодульОбъекта");
		//Результат.Добавить("ОсновнаяФормаДляВыбора");
		//Результат.Добавить("ОсновнаяФормаОбъекта");
		//Результат.Добавить("ОсновнаяФормаСписка");
		Результат.Добавить("ОсновноеПредставление");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("ПолнотекстовыйПоискПриВводеПоСтроке");
		Результат.Добавить("ПоляБлокировкиДанных");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПредставлениеОбъекта");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РаспределеннаяИнформационнаяБаза");
		Результат.Добавить("РасширенноеПредставлениеОбъекта");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("РежимПолученияДанныхВыбораПриВводеПоСтроке");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		//Результат.Добавить("Реквизиты");
		Результат.Добавить("Синоним");
		Результат.Добавить("СозданиеПриВводе");
		//Результат.Добавить("Состав");
		Результат.Добавить("СпособВыбора");
		Результат.Добавить("СпособПоискаСтрокиПриВводеПоСтроке");
		Результат.Добавить("СпособРедактирования");
		Результат.Добавить("Справка");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("ТабличныеЧасти");
		//Результат.Добавить("Формы");
		//Результат.Добавить("Характеристики");
		
	ИначеЕсли ОпределительОбъекта = "КритерийОтбора" Тогда
		
		Результат.Добавить("ДополнительнаяФорма");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		//Результат.Добавить("МодульМенеджера");
		Результат.Добавить("ОсновнаяФорма");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("Синоним");
		Результат.Добавить("Состав");
		Результат.Добавить("Тип");
		//Результат.Добавить("Формы");
		
	ИначеЕсли ОпределительОбъекта = "ПодпискаНаСобытие" Тогда
		
		Результат.Добавить("Имя");
		Результат.Добавить("Источник");
		Результат.Добавить("Комментарий");
		Результат.Добавить("Обработчик");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("Синоним");
		Результат.Добавить("Событие");
		
	ИначеЕсли ОпределительОбъекта = "РегламентноеЗадание" Тогда
		
		Результат.Добавить("Имя");
		Результат.Добавить("ИмяМетода");
		Результат.Добавить("ИнтервалПовтораПриАварийномЗавершении");
		Результат.Добавить("Использование");
		Результат.Добавить("Ключ");
		Результат.Добавить("КоличествоПовторовПриАварийномЗавершении");
		Результат.Добавить("Комментарий");
		Результат.Добавить("Наименование");
		Результат.Добавить("Предопределенное");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("Расписание");
		Результат.Добавить("Синоним");
		
	ИначеЕсли ОпределительОбъекта = "ФункциональнаяОпция" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "ПараметрФункциональнойОпции" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "ОпределяемыйТип" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "ХранилищеНастроек" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "ОбщаяФорма" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "ОбщаяКоманда" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "ГруппаКоманд" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "ОбщийМакет" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "ОбщаяКартинка" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "XDTOПакет" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "WebСервис" Тогда
		
		Результат.Добавить("ВремяЖизниСеанса");
		Результат.Добавить("Имя");
		Результат.Добавить("ИмяФайлаПубликации");
		Результат.Добавить("Комментарий");
		Результат.Добавить("Модуль");
		Результат.Добавить("Операции");
		//Результат.Добавить("ПакетыXDTO");
		Результат.Добавить("ПовторноеИспользованиеСеансов");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("ПространствоИмен");
		Результат.Добавить("Синоним");
		
	ИначеЕсли ОпределительОбъекта = "HTTPСервис" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "WSСсылка" Тогда
		
		Результат.Добавить("URLИсточника");
		Результат.Добавить("WSОпределение");
		Результат.Добавить("Имя");
		Результат.Добавить("Комментарий");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("Синоним");
		
	ИначеЕсли ОпределительОбъекта = "ЭлементСтиля" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "Язык" Тогда
		
		Результат.Добавить("Имя");
		
	ИначеЕсли ОпределительОбъекта = "Константа" Тогда
		
		Результат.Добавить("БыстрыйВыбор");
		Результат.Добавить("ВыборГруппИЭлементов");
		Результат.Добавить("ВыделятьОтрицательные");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		Результат.Добавить("ИсторияВыбораПриВводе");
		Результат.Добавить("Комментарий");
		Результат.Добавить("МаксимальноеЗначение");
		Результат.Добавить("Маска");
		Результат.Добавить("МинимальноеЗначение");
		Результат.Добавить("МногострочныйРежим");
		//Результат.Добавить("МодульМенеджераЗначения");
		//Результат.Добавить("ОсновнаяФорма");
		//Результат.Добавить("ПараметрыВыбора");
		Результат.Добавить("Подсказка");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("ПроверкаЗаполнения");
		Результат.Добавить("РасширенноеПредставление");
		Результат.Добавить("РасширенноеРедактирование");
		Результат.Добавить("РежимПароля");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		//Результат.Добавить("СвязиПараметровВыбора");
		//Результат.Добавить("СвязьПоТипу");
		Результат.Добавить("Синоним");
		Результат.Добавить("Тип");
		//Результат.Добавить("ФормаВыбора");
		Результат.Добавить("Формат");
		Результат.Добавить("ФорматРедактирования");
		
	ИначеЕсли ОпределительОбъекта = "Документ" Тогда
		
		Результат.Добавить("Автонумерация");
		Результат.Добавить("ВводПоСтроке");
		Результат.Добавить("ВводитсяНаОсновании");
		Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("Движения");
		Результат.Добавить("ДлинаНомера");
		//Результат.Добавить("ДополнительнаяФормаДляВыбора");
		//Результат.Добавить("ДополнительнаяФормаОбъекта");
		//Результат.Добавить("ДополнительнаяФормаСписка");
		Результат.Добавить("ДопустимаяДлинаНомера");
		Результат.Добавить("ЗаписьДвиженийПриПроведении");
		Результат.Добавить("ЗаполнениеПоследовательностей");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		Результат.Добавить("ИсторияВыбораПриВводе");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		Результат.Добавить("КонтрольУникальности");
		//Результат.Добавить("Макеты");
		//Результат.Добавить("МодульМенеджера");
		//Результат.Добавить("МодульОбъекта");
		Результат.Добавить("Нумератор");
		Результат.Добавить("ОперативноеПроведение");
		Результат.Добавить("ОсновнаяФормаДляВыбора");
		Результат.Добавить("ОсновнаяФормаОбъекта");
		Результат.Добавить("ОсновнаяФормаСписка");
		Результат.Добавить("ПериодичностьНомера");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("ПолнотекстовыйПоискПриВводеПоСтроке");
		//Результат.Добавить("ПоляБлокировкиДанных");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПредставлениеОбъекта");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПривилегированныйРежимПриОтменеПроведения");
		Результат.Добавить("ПривилегированныйРежимПриПроведении");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("Проведение");
		Результат.Добавить("РасширенноеПредставлениеОбъекта");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("РежимПолученияДанныхВыбораПриВводеПоСтроке");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		Результат.Добавить("Реквизиты");
		Результат.Добавить("Синоним");
		Результат.Добавить("СозданиеПриВводе");
		Результат.Добавить("СпособПоискаСтрокиПриВводеПоСтроке");
		//Результат.Добавить("Справка");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("ТабличныеЧасти");
		Результат.Добавить("ТипНомера");
		Результат.Добавить("УдалениеДвижений");
		//Результат.Добавить("Формы");
		Результат.Добавить("Характеристики");
		
	ИначеЕсли ОпределительОбъекта = "Справочник" Тогда
		
		Результат.Добавить("Автонумерация");
		Результат.Добавить("БыстрыйВыбор");
		Результат.Добавить("ВводПоСтроке");
		//Результат.Добавить("ВводитсяНаОсновании");
		Результат.Добавить("ВидИерархии");
		Результат.Добавить("ВключатьСправкуВСодержание");
		//Результат.Добавить("Владельцы");
		Результат.Добавить("ГруппыСверху");
		Результат.Добавить("ДлинаКода");
		Результат.Добавить("ДлинаНаименования");
		Результат.Добавить("ДополнительнаяФормаГруппы");
		Результат.Добавить("ДополнительнаяФормаДляВыбора");
		Результат.Добавить("ДополнительнаяФормаДляВыбораГруппы");
		Результат.Добавить("ДополнительнаяФормаОбъекта");
		Результат.Добавить("ДополнительнаяФормаСписка");
		Результат.Добавить("ДопустимаяДлинаКода");
		Результат.Добавить("Иерархический");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользованиеПодчинения");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		Результат.Добавить("ИсторияВыбораПриВводе");
		Результат.Добавить("КоличествоУровней");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		Результат.Добавить("КонтрольУникальности");
		//Результат.Добавить("Макеты");
		Результат.Добавить("МодульМенеджера");
		Результат.Добавить("МодульОбъекта");
		Результат.Добавить("ОбновлениеПредопределенныхДанных");
		Результат.Добавить("ОграничиватьКоличествоУровней");
		Результат.Добавить("ОсновнаяФормаГруппы");
		Результат.Добавить("ОсновнаяФормаДляВыбора");
		Результат.Добавить("ОсновнаяФормаДляВыбораГруппы");
		Результат.Добавить("ОсновнаяФормаОбъекта");
		Результат.Добавить("ОсновнаяФормаСписка");
		Результат.Добавить("ОсновноеПредставление");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("ПолнотекстовыйПоискПриВводеПоСтроке");
		Результат.Добавить("ПоляБлокировкиДанных");
		Результат.Добавить("Пояснение");
		Результат.Добавить("Предопределенные");
		Результат.Добавить("ПредставлениеОбъекта");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РасширенноеПредставлениеОбъекта");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("РежимПолученияДанныхВыбораПриВводеПоСтроке");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		//Результат.Добавить("Реквизиты");
		Результат.Добавить("СерииКодов");
		Результат.Добавить("Синоним");
		Результат.Добавить("СозданиеПриВводе");
		Результат.Добавить("СпособВыбора");
		Результат.Добавить("СпособПоискаСтрокиПриВводеПоСтроке");
		Результат.Добавить("СпособРедактирования");
		//Результат.Добавить("Справка");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("ТабличныеЧасти");
		Результат.Добавить("ТипКода");
		//Результат.Добавить("Формы");
		Результат.Добавить("Характеристики");
		
	ИначеЕсли ОпределительОбъекта = "ЖурналДокументов" Тогда
		
		Результат.Добавить("ВключатьСправкуВСодержание");
		//Результат.Добавить("Графы");
		Результат.Добавить("ДополнительнаяФорма");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		//Результат.Добавить("Макеты");
		//Результат.Добавить("МодульМенеджера");
		Результат.Добавить("ОсновнаяФорма");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		//Результат.Добавить("РегистрируемыеДокументы");
		Результат.Добавить("Синоним");
		//Результат.Добавить("Справка");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("Формы");
		
	ИначеЕсли ОпределительОбъекта = "Перечисление" Тогда
		
		Результат.Добавить("БыстрыйВыбор");
		//Результат.Добавить("ДополнительнаяФормаДляВыбора");
		//Результат.Добавить("ДополнительнаяФормаСписка");
		Результат.Добавить("ЗначенияПеречисления");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		Результат.Добавить("ИсторияВыбораПриВводе");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		//Результат.Добавить("Макеты");
		//Результат.Добавить("МодульМенеджера");
		//Результат.Добавить("ОсновнаяФормаДляВыбора");
		//Результат.Добавить("ОсновнаяФормаСписка");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("Синоним");
		Результат.Добавить("СпособВыбора");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("Формы");
		//Результат.Добавить("Характеристики");
		
	ИначеЕсли ОпределительОбъекта = "Отчет" Тогда
		
		Результат.Добавить("ВключатьСправкуВСодержание");
		//Результат.Добавить("ДополнительнаяФорма");
		//Результат.Добавить("ДополнительнаяФормаНастроек");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		//Результат.Добавить("Макеты");
		//Результат.Добавить("МодульМенеджера");
		//Результат.Добавить("МодульОбъекта");
		Результат.Добавить("ОсновнаяСхемаКомпоновкиДанных");
		//Результат.Добавить("ОсновнаяФорма");
		//Результат.Добавить("ОсновнаяФормаВарианта");
		//Результат.Добавить("ОсновнаяФормаНастроек");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РасширенноеПредставление");
		//Результат.Добавить("Реквизиты");
		Результат.Добавить("Синоним");
		//Результат.Добавить("Справка");
		//Результат.Добавить("ТабличныеЧасти");
		//Результат.Добавить("Формы");
		//Результат.Добавить("ХранилищеВариантов");
		//Результат.Добавить("ХранилищеНастроек");
		
	ИначеЕсли ОпределительОбъекта = "Обработка" Тогда
		
		Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("ДополнительнаяФорма");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		//Результат.Добавить("Макеты");
		//Результат.Добавить("МодульМенеджера");
		//Результат.Добавить("МодульОбъекта");
		//Результат.Добавить("ОсновнаяФорма");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РасширенноеПредставление");
		//Результат.Добавить("Реквизиты");
		Результат.Добавить("Синоним");
		Результат.Добавить("Справка");
		//Результат.Добавить("ТабличныеЧасти");
		//Результат.Добавить("Формы");
		
	ИначеЕсли ОпределительОбъекта = "ПланВидовХарактеристик" Тогда
		
		Результат.Добавить("Автонумерация");
		Результат.Добавить("БыстрыйВыбор");
		Результат.Добавить("ВводПоСтроке");
		Результат.Добавить("ВводитсяНаОсновании");
		Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("ГруппыСверху");
		Результат.Добавить("ДлинаКода");
		Результат.Добавить("ДлинаНаименования");
		//Результат.Добавить("ДополнительнаяФормаГруппы");
		//Результат.Добавить("ДополнительнаяФормаДляВыбора");
		//Результат.Добавить("ДополнительнаяФормаДляВыбораГруппы");
		//Результат.Добавить("ДополнительнаяФормаОбъекта");
		//Результат.Добавить("ДополнительнаяФормаСписка");
		Результат.Добавить("ДополнительныеЗначенияХарактеристик");
		Результат.Добавить("ДопустимаяДлинаКода");
		Результат.Добавить("Иерархический");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		Результат.Добавить("ИсторияВыбораПриВводе");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		Результат.Добавить("КонтрольУникальности");
		//Результат.Добавить("Макеты");
		Результат.Добавить("МодульМенеджера");
		Результат.Добавить("МодульОбъекта");
		Результат.Добавить("ОбновлениеПредопределенныхДанных");
		Результат.Добавить("ОсновнаяФормаГруппы");
		Результат.Добавить("ОсновнаяФормаДляВыбора");
		Результат.Добавить("ОсновнаяФормаДляВыбораГруппы");
		Результат.Добавить("ОсновнаяФормаОбъекта");
		Результат.Добавить("ОсновнаяФормаСписка");
		Результат.Добавить("ОсновноеПредставление");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("ПолнотекстовыйПоискПриВводеПоСтроке");
		Результат.Добавить("ПоляБлокировкиДанных");
		Результат.Добавить("Пояснение");
		Результат.Добавить("Предопределенные");
		Результат.Добавить("ПредставлениеОбъекта");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РасширенноеПредставлениеОбъекта");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("РежимПолученияДанныхВыбораПриВводеПоСтроке");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		//Результат.Добавить("Реквизиты");
		Результат.Добавить("СерииКодов");
		Результат.Добавить("Синоним");
		Результат.Добавить("СозданиеПриВводе");
		Результат.Добавить("СпособВыбора");
		Результат.Добавить("СпособПоискаСтрокиПриВводеПоСтроке");
		Результат.Добавить("СпособРедактирования");
		Результат.Добавить("Справка");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("ТабличныеЧасти");
		Результат.Добавить("Тип");
		//Результат.Добавить("Формы");
		Результат.Добавить("Характеристики");
		
	ИначеЕсли ОпределительОбъекта = "ПланСчетов" Тогда
		
		Результат.Добавить("АвтоПорядокПоКоду");
		Результат.Добавить("БыстрыйВыбор");
		Результат.Добавить("ВводПоСтроке");
		Результат.Добавить("ВводитсяНаОсновании");
		Результат.Добавить("ВидыСубконто");
		Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("ДлинаКода");
		Результат.Добавить("ДлинаНаименования");
		Результат.Добавить("ДлинаПорядка");
		//Результат.Добавить("ДополнительнаяФормаДляВыбора");
		//Результат.Добавить("ДополнительнаяФормаОбъекта");
		//Результат.Добавить("ДополнительнаяФормаСписка");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		Результат.Добавить("ИсторияВыбораПриВводе");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		Результат.Добавить("КонтрольУникальности");
		//Результат.Добавить("Макеты");
		Результат.Добавить("МаксКоличествоСубконто");
		Результат.Добавить("МаскаКода");
		Результат.Добавить("МодульМенеджера");
		Результат.Добавить("МодульОбъекта");
		Результат.Добавить("ОбновлениеПредопределенныхДанных");
		//Результат.Добавить("ОсновнаяФормаДляВыбора");
		//Результат.Добавить("ОсновнаяФормаОбъекта");
		//Результат.Добавить("ОсновнаяФормаСписка");
		Результат.Добавить("ОсновноеПредставление");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("ПолнотекстовыйПоискПриВводеПоСтроке");
		Результат.Добавить("ПоляБлокировкиДанных");
		Результат.Добавить("Пояснение");
		Результат.Добавить("Предопределенные");
		Результат.Добавить("ПредставлениеОбъекта");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПризнакиУчета");
		Результат.Добавить("ПризнакиУчетаСубконто");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РасширенноеПредставлениеОбъекта");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("РежимПолученияДанныхВыбораПриВводеПоСтроке");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		//Результат.Добавить("Реквизиты");
		Результат.Добавить("СерииКодов");
		Результат.Добавить("Синоним");
		Результат.Добавить("СозданиеПриВводе");
		Результат.Добавить("СпособВыбора");
		Результат.Добавить("СпособПоискаСтрокиПриВводеПоСтроке");
		Результат.Добавить("СпособРедактирования");
		Результат.Добавить("Справка");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("СтандартныеТабличныеЧасти");
		Результат.Добавить("ТабличныеЧасти");
		//Результат.Добавить("Формы");
		Результат.Добавить("Характеристики");
		
	ИначеЕсли ОпределительОбъекта = "ПланВидовРасчета" Тогда
		
		Результат.Добавить("БазовыеВидыРасчета");
		Результат.Добавить("БыстрыйВыбор");
		Результат.Добавить("ВводПоСтроке");
		Результат.Добавить("ВводитсяНаОсновании");
		Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("ДлинаКода");
		Результат.Добавить("ДлинаНаименования");
		Результат.Добавить("ДополнительнаяФормаДляВыбора");
		Результат.Добавить("ДополнительнаяФормаОбъекта");
		Результат.Добавить("ДополнительнаяФормаСписка");
		Результат.Добавить("ДопустимаяДлинаКода");
		Результат.Добавить("ЗависимостьОтВидовРасчета");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользованиеПериодаДействия");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		Результат.Добавить("ИсторияВыбораПриВводе");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		//Результат.Добавить("Макеты");
		//Результат.Добавить("МодульМенеджера");
		//Результат.Добавить("МодульОбъекта");
		Результат.Добавить("ОбновлениеПредопределенныхДанных");
		//Результат.Добавить("ОсновнаяФормаДляВыбора");
		//Результат.Добавить("ОсновнаяФормаОбъекта");
		//Результат.Добавить("ОсновнаяФормаСписка");
		Результат.Добавить("ОсновноеПредставление");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("ПолнотекстовыйПоискПриВводеПоСтроке");
		Результат.Добавить("ПоляБлокировкиДанных");
		Результат.Добавить("Пояснение");
		Результат.Добавить("Предопределенные");
		Результат.Добавить("ПредставлениеОбъекта");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РасширенноеПредставлениеОбъекта");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("РежимПолученияДанныхВыбораПриВводеПоСтроке");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		//Результат.Добавить("Реквизиты");
		Результат.Добавить("Синоним");
		Результат.Добавить("СозданиеПриВводе");
		Результат.Добавить("СпособВыбора");
		Результат.Добавить("СпособПоискаСтрокиПриВводеПоСтроке");
		Результат.Добавить("СпособРедактирования");
		Результат.Добавить("Справка");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("СтандартныеТабличныеЧасти");
		//Результат.Добавить("ТабличныеЧасти");
		Результат.Добавить("ТипКода");
		//Результат.Добавить("Формы");
		//Результат.Добавить("Характеристики");
		
	ИначеЕсли ОпределительОбъекта = "РегистрСведений" Тогда
		
		Результат.Добавить("ВключатьСправкуВСодержание");
		//Результат.Добавить("ДополнительнаяФормаЗаписи");
		//Результат.Добавить("ДополнительнаяФормаСписка");
		//Результат.Добавить("Измерения");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		//Результат.Добавить("Макеты");
		Результат.Добавить("МодульМенеджера");
		//Результат.Добавить("МодульНабораЗаписей");
		//Результат.Добавить("ОсновнаяФормаЗаписи");
		//Результат.Добавить("ОсновнаяФормаСписка");
		Результат.Добавить("ОсновнойОтборПоПериоду");
		Результат.Добавить("ПериодичностьРегистраСведений");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПредставлениеЗаписи");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РазрешитьИтогиСрезПервых");
		Результат.Добавить("РазрешитьИтогиСрезПоследних");
		Результат.Добавить("РасширенноеПредставлениеЗаписи");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("РежимЗаписи");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		//Результат.Добавить("Реквизиты");
		//Результат.Добавить("Ресурсы");
		Результат.Добавить("Синоним");
		Результат.Добавить("СпособРедактирования");
		//Результат.Добавить("Справка");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("Формы");
		
	ИначеЕсли ОпределительОбъекта = "РегистрНакопления" Тогда
		
		Результат.Добавить("Агрегаты");
		Результат.Добавить("ВидРегистра");
		Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("ДополнительнаяФормаСписка");
		//Результат.Добавить("Измерения");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		//Результат.Добавить("Макеты");
		//Результат.Добавить("МодульМенеджера");
		//Результат.Добавить("МодульНабораЗаписей");
		//Результат.Добавить("ОсновнаяФормаСписка");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РазрешитьРазделениеИтогов");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		//Результат.Добавить("Реквизиты");
		//Результат.Добавить("Ресурсы");
		Результат.Добавить("Синоним");
		//Результат.Добавить("Справка");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("Формы");
		
	ИначеЕсли ОпределительОбъекта = "РегистрБухгалтерии" Тогда
		
		//Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("ДлинаУточненияПериода");
		//Результат.Добавить("ДополнительнаяФормаСписка");
		//Результат.Добавить("Измерения");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		Результат.Добавить("Корреспонденция");
		//Результат.Добавить("Макеты");
		//Результат.Добавить("МодульМенеджера");
		//Результат.Добавить("МодульНабораЗаписей");
		//Результат.Добавить("ОсновнаяФормаСписка");
		Результат.Добавить("ПланСчетов");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РазрешитьРазделениеИтогов");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		//Результат.Добавить("Реквизиты");
		//Результат.Добавить("Ресурсы");
		Результат.Добавить("Синоним");
		//Результат.Добавить("Справка");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("Формы");
		
	ИначеЕсли ОпределительОбъекта = "РегистрРасчета" Тогда
		
		Результат.Добавить("БазовыйПериод");
		Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("График");
		Результат.Добавить("ДатаГрафика");
		Результат.Добавить("ДополнительнаяФормаСписка");
		Результат.Добавить("ЗначениеГрафика");
		//Результат.Добавить("Измерения");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		//Результат.Добавить("Макеты");
		//Результат.Добавить("МодульМенеджера");
		//Результат.Добавить("МодульНабораЗаписей");
		Результат.Добавить("ОсновнаяФормаСписка");
		//Результат.Добавить("Перерасчеты");
		Результат.Добавить("ПериодДействия");
		Результат.Добавить("Периодичность");
		Результат.Добавить("ПланВидовРасчета");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		//Результат.Добавить("Реквизиты");
		//Результат.Добавить("Ресурсы");
		Результат.Добавить("Синоним");
		Результат.Добавить("Справка");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("Формы");
		
	ИначеЕсли ОпределительОбъекта = "БизнесПроцесс" Тогда
		
		Результат.Добавить("Автонумерация");
		Результат.Добавить("ВводПоСтроке");
		Результат.Добавить("ВводитсяНаОсновании");
		Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("ДлинаНомера");
		//Результат.Добавить("ДополнительнаяФормаДляВыбора");
		//Результат.Добавить("ДополнительнаяФормаОбъекта");
		//Результат.Добавить("ДополнительнаяФормаСписка");
		Результат.Добавить("ДопустимаяДлинаНомера");
		Результат.Добавить("Задача");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		Результат.Добавить("ИсторияВыбораПриВводе");
		Результат.Добавить("КартаМаршрута");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		Результат.Добавить("КонтрольУникальности");
		//Результат.Добавить("Макеты");
		//Результат.Добавить("МодульМенеджера");
		//Результат.Добавить("МодульОбъекта");
		//Результат.Добавить("ОсновнаяФормаДляВыбора");
		//Результат.Добавить("ОсновнаяФормаОбъекта");
		//Результат.Добавить("ОсновнаяФормаСписка");
		Результат.Добавить("ПериодичностьНомера");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("ПолнотекстовыйПоискПриВводеПоСтроке");
		Результат.Добавить("ПоляБлокировкиДанных");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПредставлениеОбъекта");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПривилегированныйРежимПриСозданииЗадач");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РасширенноеПредставлениеОбъекта");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("РежимПолученияДанныхВыбораПриВводеПоСтроке");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		//Результат.Добавить("Реквизиты");
		Результат.Добавить("Синоним");
		Результат.Добавить("СозданиеПриВводе");
		Результат.Добавить("СпособПоискаСтрокиПриВводеПоСтроке");
		Результат.Добавить("СпособРедактирования");
		Результат.Добавить("Справка");
		//Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("ТабличныеЧасти");
		Результат.Добавить("ТипНомера");
		//Результат.Добавить("Формы");
		//Результат.Добавить("Характеристики");
		
	ИначеЕсли ОпределительОбъекта = "Задача" Тогда
		
		Результат.Добавить("АвтоПрефиксНомераЗадачи");
		Результат.Добавить("Автонумерация");
		Результат.Добавить("Адресация");
		Результат.Добавить("ВводПоСтроке");
		Результат.Добавить("ВводитсяНаОсновании");
		Результат.Добавить("ВключатьСправкуВСодержание");
		Результат.Добавить("ДлинаНаименования");
		Результат.Добавить("ДлинаНомера");
		Результат.Добавить("ДополнительнаяФормаДляВыбора");
		Результат.Добавить("ДополнительнаяФормаОбъекта");
		Результат.Добавить("ДополнительнаяФормаСписка");
		Результат.Добавить("ДопустимаяДлинаНомера");
		Результат.Добавить("Имя");
		Результат.Добавить("ИспользоватьСтандартныеКоманды");
		Результат.Добавить("ИсторияВыбораПриВводе");
		//Результат.Добавить("Команды");
		Результат.Добавить("Комментарий");
		Результат.Добавить("КонтрольУникальности");
		//Результат.Добавить("Макеты");
		//Результат.Добавить("МодульМенеджера");
		//Результат.Добавить("МодульОбъекта");
		Результат.Добавить("ОсновнаяФормаДляВыбора");
		Результат.Добавить("ОсновнаяФормаОбъекта");
		Результат.Добавить("ОсновнаяФормаСписка");
		Результат.Добавить("ОсновноеПредставление");
		Результат.Добавить("ОсновнойРеквизитАдресации");
		Результат.Добавить("ПолнотекстовыйПоиск");
		Результат.Добавить("ПолнотекстовыйПоискПриВводеПоСтроке");
		Результат.Добавить("ПоляБлокировкиДанных");
		Результат.Добавить("Пояснение");
		Результат.Добавить("ПредставлениеОбъекта");
		Результат.Добавить("ПредставлениеСписка");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РасширенноеПредставлениеОбъекта");
		Результат.Добавить("РасширенноеПредставлениеСписка");
		Результат.Добавить("РежимПолученияДанныхВыбораПриВводеПоСтроке");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		//Результат.Добавить("Реквизиты");
		//Результат.Добавить("РеквизитыАдресации");
		Результат.Добавить("Синоним");
		Результат.Добавить("СозданиеПриВводе");
		Результат.Добавить("СпособПоискаСтрокиПриВводеПоСтроке");
		Результат.Добавить("СпособРедактирования");
		Результат.Добавить("Справка");
		Результат.Добавить("СтандартныеРеквизиты");
		//Результат.Добавить("ТабличныеЧасти");
		Результат.Добавить("ТекущийИсполнитель");
		Результат.Добавить("ТипНомера");
		//Результат.Добавить("Формы");
		//Результат.Добавить("Характеристики");
		
	ИначеЕсли ОпределительОбъекта = "ВнешнийИсточникДанных" Тогда
		
		Результат.Добавить("Имя");
		Результат.Добавить("Комментарий");
		//Результат.Добавить("Кубы");
		Результат.Добавить("ПринадлежностьОбъекта");
		Результат.Добавить("РежимУправленияБлокировкойДанных");
		Результат.Добавить("Синоним");
		//Результат.Добавить("Таблицы");
		//Результат.Добавить("Функции");
		
	КонецЕсли;
	
	СЗ = Новый СписокЗначений;
	СЗ.ЗагрузитьЗначения(Результат);
	СЗ.СортироватьПоЗначению();
	
	Результат = СЗ.ВыгрузитьЗначения();
	
	Возврат Результат;
	
КонецФункции

Функция ИмяДополнительнойКомандыСпискаЭлементов(ИмяСпискаЭлементов, ТипДопКоманды) Экспорт
	
	Результат       = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяСпискаЭлементов) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(ТипДопКоманды) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	_ = Система_РазделительЧастейИмен;
	
	Результат = СтрШаблон("Команда" + _ + "%1" + _ + "%2", ТипДопКоманды, ИмяСпискаЭлементов);
	
	Возврат Результат;
	
КонецФункции

// Параметры табличной части, таблицы движений по связанной с ним команде.
//
// Параметры:
//	ИмяЭлементаКоманды - Строка, имя команды (например: "Команда_Закрыть_Список_Справочники_Справочник_ДоговорыКонтрагентов_2").
//
// Возвращаемое значение:
//	Структура. Параметры таблицы объекта (табличной части, связанного набора движений).
//
Функция ПараметрыТаблицыПоИмениКоманды(ИмяЭлементаКоманды) Экспорт
	
	Результат       = Тип_ПараметрыТаблицыПоИмениКоманды();
	ПустойРезультат = Неопределено;
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяЭлементаКоманды) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	РЧИ = Система_РазделительЧастейИмен;
	
	ЧастиСтроки = СтрРазделить(ИмяЭлементаКоманды, РЧИ, Ложь);
	
	ТипТаблицы = "";
	
	Если ЧастиСтроки[2] = "ТабличнаяЧасть" Тогда
		
		ТипТаблицы = "ТабличнаяЧасть";
		ИмяТаблицы = ЧастиСтроки[3];
		
	ИначеЕсли ЧастиСтроки[2] = "РегистрНакопления" Тогда
		
		ТипТаблицы = "РегистрНакопления";
		ИмяТаблицы = ЧастиСтроки[3];
		
	ИначеЕсли ЧастиСтроки[2] = "РегистрСведений" Тогда
		
		ТипТаблицы = "РегистрСведений";
		ИмяТаблицы = ЧастиСтроки[3];
		
	ИначеЕсли ЧастиСтроки[2] = "РегистрРасчета" Тогда
		
		ТипТаблицы = "РегистрРасчета";
		ИмяТаблицы = ЧастиСтроки[3];
		
	ИначеЕсли ЧастиСтроки[2] = "РегистрБухгалтерии" Тогда
		
		ТипТаблицы = "РегистрБухгалтерии";
		ИмяТаблицы = ЧастиСтроки[3];
		
	Иначе
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Результат.ТипТаблицы = ТипТаблицы;
	Результат.ИмяТаблицы = ИмяТаблицы;
	
	Возврат Результат;
	
КонецФункции

// Имя списка элементов, табличной части, таблицы движений по связанной с ним команде.
//
// Параметры:
//	ИмяЭлементаКоманды - Строка, имя команды (например: "Команда_Закрыть_Список_Справочники_Справочник_ДоговорыКонтрагентов_2").
//
// Возвращаемое значение:
//	Строка. Имя элемента-списка (например: "Список_Справочники_Справочник_ДоговорыКонтрагентов_2").
//
Функция ИмяСпискаПоИмениКоманды(ИмяЭлементаКоманды) Экспорт
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяЭлементаКоманды) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	РЧИ = Система_РазделительЧастейИмен;
	
	ЧастиСтроки = СтрРазделить(ИмяЭлементаКоманды, РЧИ, Ложь);
	
	ТипСписка = ЧастиСтроки[2];
	
	Если ТипСписка = "ТабличнаяЧасть" Тогда
		
		ИмяСписка = СтрШаблон(
			"%1"
			+ РЧИ + "%2"
			, ЧастиСтроки[2], ЧастиСтроки[3]
		);
		
	ИначеЕсли ТипСписка = "РегистрНакопления" Или ТипСписка = "РегистрСведений" Или ТипСписка = "РегистрРасчета" Или ТипСписка = "РегистрБухгалтерии" Тогда
		
		ИмяСписка = СтрШаблон(
			"%1"
			+ РЧИ + "%2"
			, ЧастиСтроки[2], ЧастиСтроки[3]
		);
		
	Иначе
		
		ИмяСписка = СтрШаблон(
			"Список"
			+ РЧИ + "%1"
			+ РЧИ + "%2"
			+ РЧИ + "%3"
			+ РЧИ
			+ "%4", ЧастиСтроки[3], ЧастиСтроки[4], ЧастиСтроки[5], ЧастиСтроки[6]
		);
		
	КонецЕсли;
	
	Результат = ИмяСписка;
	
	Возврат Результат;
	
КонецФункции

Функция НавигационнаяСсылкаНаЭлемент(ЭлементБазы) Экспорт
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ЭлементБазы) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Попытка
		ЭлементБазыМД = ЭлементБазы.Метаданные()
	Исключение
		Возврат ПустойРезультат;
	КонецПопытки;
	
	#КонецОбласти
	
	НвСсылка = "";
	
	Попытка
		НвСсылка = ПолучитьНавигационнуюСсылку(ЭлементБазы);
	Исключение
		//
	КонецПопытки;
	
	Если Не ЗначениеЗаполнено(НвСсылка) Тогда
		
		Если ЭтоПланОбмена(ЭлементБазыМД) Тогда
			НвСсылка = НавигационнаяСсылкаНаУзелПланаОбмена(ЭлементБазы);
		КонецЕсли;
		
	КонецЕсли;
	
	Результат = НвСсылка;
	
	Возврат Результат;
	
КонецФункции

// Навигационная ссылка на узел плана обмена.
//
// Параметры:
//	Узел - ПланОбменаСсылка - узел плана обмена.
//
// Возвращаемое значение:
//	Строка. Навигационная ссылка на узел плана обмена (например: "e1cib/data/ПланОбмена.Полный?ref=82776014b37d65b811e8d25d0e5912d4").
//
Функция НавигационнаяСсылкаНаУзелПланаОбмена(Узел) Экспорт
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(Узел) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	УзелМД = Узел.Метаданные();
	ИмяПланаОбмена = УзелМД.Имя;
	
	УзелИД = Строка(Узел.УникальныйИдентификатор());
	НвСсылкаИД = ИдентификаторДляНавигационнойСсылки(УзелИД);
	
	Результат = СтрШаблон("e1cib/data/ПланОбмена.%1?ref=%2", ИмяПланаОбмена, НвСсылкаИД);
	
	Возврат Результат;
	
КонецФункции

Функция ИдентификаторДляНавигационнойСсылки(Знач ИД)
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИД) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	ИД = СокрЛП(ИД);
	
	ЧастиИД = СтрРазделить(ИД, "-", Ложь);
	
	Результат = ЧастиИД[3] + ЧастиИД[4] + ЧастиИД[2] + ЧастиИД[1] + ЧастиИД[0];
	
	Возврат Результат;
	
КонецФункции

Функция УзлыПланаОбмена(ИмяПланаОбмена) Экспорт
	
	Результат = Неопределено;
	ПустойРезультат = Неопределено;
	
	Попытка
		ЭтотУзелПланаОбмена = ПланыОбмена[ИмяПланаОбмена].ЭтотУзел();
	Исключение
		// Разделенный режим, пропускаем.
		Возврат ПустойРезультат;
	КонецПопытки;
	
	ТекстЗапроса = 
	"ВЫБРАТЬ
	|	Т.Ссылка КАК Ссылка,
	|	Т.Код КАК Код,
	|	Т.Наименование КАК Наименование,
	|	Т.НомерОтправленного КАК НомерОтправленного,
	|	Т.НомерПринятого КАК НомерПринятого
	|ИЗ
	|	ПланОбмена.%1 КАК Т
	|ГДЕ
	|	Т.Ссылка <> &ЭтотУзелПланаОбмена";
	
	ТекстЗапроса = СтрШаблон(ТекстЗапроса, ИмяПланаОбмена);
	
	Запрос = Новый Запрос;
	Запрос.Текст = ТекстЗапроса;
	Запрос.УстановитьПараметр("ЭтотУзелПланаОбмена", ЭтотУзелПланаОбмена);
	
	ТЗ = Запрос.Выполнить().Выгрузить();
	Граница = ТЗ.Количество() - 1;
	
	Для ОбрИндекс = 0 По Граница Цикл
		
		стр_ТЗ = ТЗ[0];
		
		Попытка
			ЭтотУзелПланаОбмена = ПланыОбмена[ИмяПланаОбмена].ЭтотУзел();
		Исключение
			ТЗ.Удалить(стр_ТЗ);
			Продолжить;
		КонецПопытки;
		
	КонецЦикла;
	
	Результат = ТЗ;
	
	Возврат Результат;
	
КонецФункции

Функция ОбъектБазыЗарегистрированНаУзлеПланаОбмена(ОбъектБазы, УзелПланаОбмена) Экспорт
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ОбъектБазы) Тогда
		Возврат Ложь;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(УзелПланаОбмена) Тогда
		Возврат Ложь;
	КонецЕсли;
	
	#КонецОбласти
	
	Попытка
		Результат = ПланыОбмена.ИзменениеЗарегистрировано(УзелПланаОбмена, ОбъектБазы);
	Исключение
		Возврат Ложь;
	КонецПопытки;
	
	Возврат Результат;
	
КонецФункции

Функция НомерВерсииОбработки() Экспорт
	
	Возврат "2025.12.19";
	
КонецФункции

Функция ЭтоВнешняяОбработка() Экспорт
	
	Возврат (Метаданные.НайтиПоТипу(ТипЗнч(ЭтотОбъект)) = Неопределено);
	
КонецФункции

Функция ТипХранилищеЗначения() Экспорт
	
	МассивТипов = Новый Массив;
	МассивТипов.Добавить(Тип("ХранилищеЗначения"));
	
	Результат = Новый ОписаниеТипов(МассивТипов);
	
	Возврат Результат;
	
КонецФункции

// Определяет тип источника элементов извлекая его из имени списка.
//
// Параметры:
//	ИмяСпискаЭлементов - Строка, имя списка элементов, например "Список_777_РегистрыСведений_777_РегистрСведений_777_ЦеныНоменклатуры_777_2".
//
// Возвращаемое значение:
//	Строка, имя типа источника данных списка элементов, например: "РегистрСведений.ЦеныНоменклатуры".
//
Функция ТипИсточникаДанныхСпискаЭлементов(ИмяСпискаЭлементов) Экспорт
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяСпискаЭлементов) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	РЧИ = Система_РазделительЧастейИмен;
	
	ЧастиИмени = СтрРазделить(ИмяСпискаЭлементов, РЧИ, Ложь);
	
	Результат = ЧастиИмени[2];
	
	Возврат Результат;
	
КонецФункции

Функция ВсеКоллекцииОбъектовМетаданных()
	
	Результат = Новый ТаблицаЗначений;
	Результат.Колонки.Добавить("ИмяКоллекции");
	Результат.Колонки.Добавить("ИмяЭлементаКоллекции");
	Результат.Колонки.Добавить("СинонимКоллекции");
	Результат.Колонки.Добавить("НомерКартинки");
	
	// Общие
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.Подсистемы", "Подсистема", "Подсистемы", 20);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ОбщиеМодули", "ОбщийМодуль", "Общие модули", 21);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ПараметрыСеанса", "ПараметрСеанса", "Параметры сеанса", 22);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.Роли", "Роль", "Роли", 23);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ОбщиеРеквизиты", "ОбщийРеквизит", "Общие реквизиты", 24);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ПланыОбмена", "ПланОбмена", "Планы обмена", 25);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.КритерииОтбора", "КритерийОтбора", "Критерии отбора", 26);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ПодпискиНаСобытия", "ПодпискаНаСобытие", "Подписки на события", 27);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.РегламентныеЗадания", "РегламентноеЗадание", "Регламентные задания", 28);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ФункциональныеОпции", "ФункциональнаяОпция", "Функциональные опции", 29);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ПараметрыФункциональныхОпций", "ПараметрФункциональнойОпции", "Параметры функциональных опций", 30);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ОпределяемыеТипы", "ОпределяемыйТип", "Определяемые типы", 31);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ХранилищаНастроек", "ХранилищеНастроек", "Хранилища настроек", 32);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ОбщиеФормы", "ОбщаяФорма", "Общие формы", 33);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ОбщиеКоманды", "ОбщаяКоманда", "Общие команды", 34);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ГруппыКоманд", "ГруппаКоманд", "Группы команд", 35);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ОбщиеМакеты", "ОбщийМакет", "Общие макеты", 36);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ОбщиеКартинки", "ОбщаяКартинка", "Общие картинки", 37);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ПакетыXDTO", "ПакетXDTO", "XDTO-пакеты", 38);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.WebСервисы", "WebСервис", "Web-сервисы", 39);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.HTTPСервисы", "HTTPСервис", "HTTP-сервисы", 40);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.WSСсылки", "WSСсылка", "WS-ссылки", 41);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.ЭлементыСтиля", "ЭлементСтиля", "Элементы стиля", 42);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Общие.Языки", "Язык", "Языки", 43);
	
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Константы", "Константа", "Константы", 3);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Справочники", "Справочник", "Справочники", 4);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Документы", "Документ", "Документы", 5);
	//ДобавитьЗаписьОписанияКоллекцииОМ(Результат, "Документы.НумераторыДокументов", "НумераторДокументов", "Нумераторы");
	//ДобавитьЗаписьОписанияКоллекцииОМ(Результат, "Документы.Последовательности", "Последовательность", "Последовательности");
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "ЖурналыДокументов", "ЖурналДокументов", "Журналы документов", 6);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Перечисления", "Перечисление", "Перечисления", 7);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Отчеты", "Отчет", "Отчеты", 8);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Обработки", "Обработка", "Обработки", 9);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "ПланыВидовХарактеристик", "ПланВидовХарактеристик", "Планы видов характеристик", 10);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "ПланыСчетов", "ПланСчетов", "Планы счетов", 11);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "ПланыВидовРасчета", "ПланВидовРасчета", "Планы видов расчета", 12);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "РегистрыСведений", "РегистрСведений", "Регистры сведений", 13);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "РегистрыНакопления", "РегистрНакопления", "Регистры накопления", 14);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "РегистрыБухгалтерии", "РегистрБухгалтерии", "Регистры бухгалтерии", 15);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "РегистрыРасчета", "РегистрРасчета", "Регистры расчета", 16);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "БизнесПроцессы", "БизнесПроцесс", "Бизнес-процессы", 17);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "Задачи", "Задача", "Задачи", 18);
	ДобавитьЗаписьОписанияКоллекцииОбъектаМетаданных(Результат, "ВнешниеИсточникиДанных", "ВнешнийИсточникДанных", "Внешние источники данных", 19);
	
	Возврат Результат;
	
КонецФункции

Функция ЭтоНавигационнаяСсылка(Знач АдресСсылки)
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(АдресСсылки) Тогда
		Возврат Ложь;
	КонецЕсли;
	
	#КонецОбласти
	
	АдресСсылки = СокрЛП(АдресСсылки);
	
	МаркерНвСсылки = "e1cib";
	
	Если ВРег(Лев(АдресСсылки, СтрДлина(МаркерНвСсылки))) = ВРег(МаркерНвСсылки) Тогда
		Возврат Истина;
	КонецЕсли;
	
	Возврат Ложь;
	
КонецФункции

Функция ИмяСвойстваГлобальногоКонтекста(ИмяТипаОбъекта) Экспорт
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяТипаОбъекта) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	Результат = м_СоответствиеИменСвойствТиповКоллекций.Получить(ИмяТипаОбъекта);
	
	Возврат Результат;
	
КонецФункции

// Имя базового типа по переданному значению объекта метаданных.
//
// Параметры:
//	ОбъектМетаданных - ОбъектМетаданных, объект метаданных, по которому необходимо определить базовый тип.
// 
// Возвращаемое значение:
//	Строка - имя базового типа по переданному значению объекта метаданных.
//
// Пример:
//	ИмяБазовогоТипа = ОбщегоНазначения.ИмяБазовогоТипаПоОбъектуМетаданных(Метаданные.Справочники.Номенклатура); "Справочники".
//
Функция ИмяБазовогоТипаПоОбъектуМетаданных(ОбъектМетаданных) Экспорт
	
	Если Метаданные.Документы.Содержит(ОбъектМетаданных) Тогда
		Возврат "Документы";
		
	ИначеЕсли Метаданные.Справочники.Содержит(ОбъектМетаданных) Тогда
		Возврат "Справочники";
		
	ИначеЕсли Метаданные.Перечисления.Содержит(ОбъектМетаданных) Тогда
		Возврат "Перечисления";
		
	ИначеЕсли Метаданные.РегистрыСведений.Содержит(ОбъектМетаданных) Тогда
		Возврат "РегистрыСведений";
		
	ИначеЕсли Метаданные.РегистрыНакопления.Содержит(ОбъектМетаданных) Тогда
		Возврат "РегистрыНакопления";
		
	ИначеЕсли Метаданные.РегистрыБухгалтерии.Содержит(ОбъектМетаданных) Тогда
		Возврат "РегистрыБухгалтерии";
		
	ИначеЕсли Метаданные.РегистрыРасчета.Содержит(ОбъектМетаданных) Тогда
		Возврат "РегистрыРасчета";
		
	ИначеЕсли Метаданные.ПланыОбмена.Содержит(ОбъектМетаданных) Тогда
		Возврат "ПланыОбмена";
		
	ИначеЕсли Метаданные.ПланыВидовХарактеристик.Содержит(ОбъектМетаданных) Тогда
		Возврат "ПланыВидовХарактеристик";
		
	ИначеЕсли Метаданные.БизнесПроцессы.Содержит(ОбъектМетаданных) Тогда
		Возврат "БизнесПроцессы";
		
	ИначеЕсли Метаданные.Задачи.Содержит(ОбъектМетаданных) Тогда
		Возврат "Задачи";
		
	ИначеЕсли Метаданные.ПланыСчетов.Содержит(ОбъектМетаданных) Тогда
		Возврат "ПланыСчетов";
		
	ИначеЕсли Метаданные.ПланыВидовРасчета.Содержит(ОбъектМетаданных) Тогда
		Возврат "ПланыВидовРасчета";
		
	ИначеЕсли Метаданные.Константы.Содержит(ОбъектМетаданных) Тогда
		Возврат "Константы";
		
	ИначеЕсли Метаданные.ЖурналыДокументов.Содержит(ОбъектМетаданных) Тогда
		Возврат "ЖурналыДокументов";
		
	ИначеЕсли Метаданные.Последовательности.Содержит(ОбъектМетаданных) Тогда
		Возврат "Последовательности";
		
	ИначеЕсли Метаданные.РегламентныеЗадания.Содержит(ОбъектМетаданных) Тогда
		Возврат "РегламентныеЗадания";
		
	ИначеЕсли Метаданные.РегистрыРасчета.Содержит(ОбъектМетаданных.Родитель())
		И ОбъектМетаданных.Родитель().Перерасчеты.Найти(ОбъектМетаданных.Имя) = ОбъектМетаданных Тогда
		Возврат "Перерасчеты";
		
	Иначе
		
		Возврат "";
		
	КонецЕсли;
	
КонецФункции

Функция ИмяТипаОбъектаМетаданных(ОбъектМетаданных) Экспорт
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если (ОбъектМетаданных = Неопределено) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	Если Метаданные.Документы.Содержит(ОбъектМетаданных) Тогда
		Возврат "Документ";
		
	ИначеЕсли Метаданные.Справочники.Содержит(ОбъектМетаданных) Тогда
		Возврат "Справочник";
		
	ИначеЕсли Метаданные.Перечисления.Содержит(ОбъектМетаданных) Тогда
		Возврат "Перечисление";
		
	ИначеЕсли Метаданные.РегистрыСведений.Содержит(ОбъектМетаданных) Тогда
		Возврат "РегистрСведений";
		
	ИначеЕсли Метаданные.РегистрыНакопления.Содержит(ОбъектМетаданных) Тогда
		Возврат "РегистрНакопления";
		
	ИначеЕсли Метаданные.РегистрыБухгалтерии.Содержит(ОбъектМетаданных) Тогда
		Возврат "РегистрБухгалтерии";
		
	ИначеЕсли Метаданные.РегистрыРасчета.Содержит(ОбъектМетаданных) Тогда
		Возврат "РегистрРасчета";
		
	ИначеЕсли Метаданные.ПланыОбмена.Содержит(ОбъектМетаданных) Тогда
		Возврат "ПланОбмена";
		
	ИначеЕсли Метаданные.ПланыВидовХарактеристик.Содержит(ОбъектМетаданных) Тогда
		Возврат "ПланВидовХарактеристик";
		
	ИначеЕсли Метаданные.БизнесПроцессы.Содержит(ОбъектМетаданных) Тогда
		Возврат "БизнесПроцесс";
		
	ИначеЕсли Метаданные.Задачи.Содержит(ОбъектМетаданных) Тогда
		Возврат "Задача";
		
	ИначеЕсли Метаданные.ПланыСчетов.Содержит(ОбъектМетаданных) Тогда
		Возврат "ПланСчетов";
		
	ИначеЕсли Метаданные.ПланыВидовРасчета.Содержит(ОбъектМетаданных) Тогда
		Возврат "ПланВидовРасчета";
		
	ИначеЕсли Метаданные.Константы.Содержит(ОбъектМетаданных) Тогда
		Возврат "Константа";
		
	ИначеЕсли Метаданные.ЖурналыДокументов.Содержит(ОбъектМетаданных) Тогда
		Возврат "ЖурналДокументов";
		
	ИначеЕсли Метаданные.Последовательности.Содержит(ОбъектМетаданных) Тогда
		Возврат "Последовательность";
		
	ИначеЕсли Метаданные.РегламентныеЗадания.Содержит(ОбъектМетаданных) Тогда
		Возврат "РегламентноеЗадание";
		
	ИначеЕсли Метаданные.Обработки.Содержит(ОбъектМетаданных) Тогда
		Возврат "Обработка";
		
	ИначеЕсли Метаданные.Отчеты.Содержит(ОбъектМетаданных) Тогда
		Возврат "Отчет";
		
	ИначеЕсли Метаданные.РегистрыРасчета.Содержит(ОбъектМетаданных.Родитель())
		И ОбъектМетаданных.Родитель().Перерасчеты.Найти(ОбъектМетаданных.Имя) = ОбъектМетаданных Тогда
		Возврат "Перерасчет";
		
	Иначе
		
		Возврат "";
		
	КонецЕсли;
	
КонецФункции

#КонецОбласти

#Область Библиотеки

#Область ОбщегоНазначения

// Структура, содержащая значения реквизитов, прочитанные из информационной базы по ссылке на объект.
//
// Если необходимо зачитать реквизит независимо от прав текущего пользователя,
// то следует использовать предварительный переход в привилегированный режим.
//
// Параметры:
//  Ссылка    - ЛюбаяСсылка - объект, значения реквизитов которого необходимо получить.
//            - Строка      - полное имя предопределенного элемента, значения реквизитов которого необходимо получить.
//  Реквизиты - Строка - имена реквизитов, перечисленные через запятую, в формате
//                       требований к свойствам структуры.
//                       Например, "Код, Наименование, Родитель".
//            - Структура, ФиксированнаяСтруктура - в качестве ключа передается
//                       псевдоним поля для возвращаемой структуры с результатом, а в качестве
//                       значения (опционально) фактическое имя поля в таблице.
//                       Если ключ задан, а значение не определено, то имя поля берется из ключа.
//            - Массив, ФиксированныйМассив - имена реквизитов в формате требований
//                       к свойствам структуры.
//  ВыбратьРазрешенные - Булево - если Истина, то запрос к объекту выполняется с учетом прав пользователя, и в случае,
//                                    - если есть ограничение на уровне записей, то все реквизиты вернутся 
//                                      со значением Неопределено;
//                                    - если нет прав для работы с таблицей, то возникнет исключение.
//                              - если Ложь, то возникнет исключение при отсутствии прав на таблицу 
//                                или любой из реквизитов.
//
// Возвращаемое значение:
//  Структура - содержит имена (ключи) и значения затребованных реквизитов.
//            - если в параметр Реквизиты передана пустая строка, то возвращается пустая структура.
//            - если в параметр Ссылка передана пустая ссылка, то возвращается структура, 
//              соответствующая именам реквизитов со значениями Неопределено.
//            - если в параметр Ссылка передана ссылка несуществующего объекта (битая ссылка), 
//              то все реквизиты вернутся со значением Неопределено.
//
Функция ЗначенияРеквизитовОбъекта(Ссылка, Знач Реквизиты, ВыбратьРазрешенные = Ложь) Экспорт
	
	// Если передано имя предопределенного. 
	Если ТипЗнч(Ссылка) = Тип("Строка") Тогда 
		
		ПолноеИмяПредопределенногоЭлемента = Ссылка;
		
		// Разбор полного имени предопределенного.
		ЧастиПолногоИмени = СтрРазделить(ПолноеИмяПредопределенногоЭлемента, ".", Ложь);
		ПолноеИмяОбъектаМетаданных = ЧастиПолногоИмени[0] + "." + ЧастиПолногоИмени[1];
		
		// Если предопределенный не создан в ИБ, то требуется выполнить проверку доступа к объекту.
		// В других сценариях проверка доступа выполняется в момент исполнения запроса.
		Если Ссылка = Неопределено Тогда 
			
			МетаданныеОбъекта = Метаданные.НайтиПоПолномуИмени(ПолноеИмяОбъектаМетаданных);
			
			Если Не ПравоДоступа("Чтение", МетаданныеОбъекта) Тогда 
				ВызватьИсключение СтрШаблон(
						НСтр("ru = 'Недостаточно прав для работы с таблицей ""%1""'"), ПолноеИмяОбъектаМетаданных);
			КонецЕсли;
			
		КонецЕсли;
		
	Иначе // Если передана ссылка.
		
		Попытка
			ПолноеИмяОбъектаМетаданных = Ссылка.Метаданные().ПолноеИмя(); 
		Исключение
			ВызватьИсключение НСтр("ru = 'Неверный первый параметр Ссылка: 
			                             |- Значение должно быть ссылкой или именем предопределенного элемента'");	
		КонецПопытки;
		
	КонецЕсли;
	
	// Разбор реквизитов, если второй параметр Строка.
	Если ТипЗнч(Реквизиты) = Тип("Строка") Тогда
		
		Если ПустаяСтрока(Реквизиты) Тогда
			Возврат Новый Структура;
		КонецЕсли;
		
		// Удаление пробелов.
		Реквизиты = СтрЗаменить(Реквизиты, " ", "");
		
		// Преобразование параметра в массив полей.
		Реквизиты = СтрРазделить(Реквизиты, ",", Ложь);
		
	КонецЕсли;
	
	// Приведение реквизитов к единому формату.
	СтруктураПолей = Новый Структура;
	Если ТипЗнч(Реквизиты) = Тип("Структура")
		Или ТипЗнч(Реквизиты) = Тип("ФиксированнаяСтруктура") Тогда
		
		СтруктураПолей = Реквизиты;
		
	ИначеЕсли ТипЗнч(Реквизиты) = Тип("Массив")
		Или ТипЗнч(Реквизиты) = Тип("ФиксированныйМассив") Тогда
		
		Для Каждого Реквизит Из Реквизиты Цикл
			
			Попытка
				ПсевдонимПоля = СтрЗаменить(Реквизит, ".", "");
				СтруктураПолей.Вставить(ПсевдонимПоля, Реквизит);
			Исключение 
				// Если псевдоним не является ключом.
				
				// Не удалось распознать ошибку, проброс первичной ошибки.
				ВызватьИсключение;
			
			КонецПопытки;
		КонецЦикла;
	Иначе
		ВызватьИсключение СтрШаблон(
			НСтр("ru = 'Неверный тип второго параметра Реквизиты: %1'"), Строка(ТипЗнч(Реквизиты)));
	КонецЕсли;
	
	// Подготовка результата (после выполнения запроса переопределится).
	Результат = Новый Структура;
	
	// Формирование текста запроса к выбираемым полям.
	ТекстЗапросаПолей = "";
	Для каждого КлючИЗначение Из СтруктураПолей Цикл
		
		ИмяПоля = ?(ЗначениеЗаполнено(КлючИЗначение.Значение),
						КлючИЗначение.Значение,
						КлючИЗначение.Ключ);
		ПсевдонимПоля = КлючИЗначение.Ключ;
		
		ТекстЗапросаПолей = 
			ТекстЗапросаПолей + ?(ПустаяСтрока(ТекстЗапросаПолей), "", ",") + "
			|	" + ИмяПоля + " КАК " + ПсевдонимПоля;
		
		
		// Предварительное добавление поля по псевдониму в возвращаемый результат.
		Результат.Вставить(ПсевдонимПоля);
		
	КонецЦикла;
	
	// Если предопределенного нет в ИБ.
	// - приведение результата к отсутствию объекта в ИБ или передаче пустой ссылки.
	Если Ссылка = Неопределено Тогда 
		Возврат Результат;
	КонецЕсли;
	
	ТекстЗапроса = 
		"ВЫБРАТЬ " + ?(ВыбратьРазрешенные, "РАЗРЕШЕННЫЕ", "") + "
		|" + ТекстЗапросаПолей + "
		|ИЗ
		|	" + ПолноеИмяОбъектаМетаданных + " КАК Таблица
		|ГДЕ
		|	Таблица.Ссылка = &Ссылка
		|";
	
	// Выполнение запроса.
	Запрос = Новый Запрос;
	Запрос.УстановитьПараметр("Ссылка", Ссылка);
	Запрос.Текст = ТекстЗапроса;
	
	Попытка
		Выборка = Запрос.Выполнить().Выбрать();
	Исключение
		
		// Если реквизиты были переданы строкой, то они уже конвертированы в массив.
		// Если реквизиты - массив, оставляем без изменений.
		// Если реквизиты - структура - конвертируем в массив.
		// В остальных случаях уже было бы выброшено исключение.
		Если Тип("Структура") = ТипЗнч(Реквизиты) Тогда
			Реквизиты = Новый Массив;
			Для каждого КлючИЗначение Из СтруктураПолей Цикл
				ИмяПоля = ?(ЗначениеЗаполнено(КлючИЗначение.Значение),
							КлючИЗначение.Значение,
							КлючИЗначение.Ключ);
				Реквизиты.Добавить(ИмяПоля);
			КонецЦикла;
		КонецЕсли;
		
		// Не удалось распознать ошибку, проброс первичной ошибки.
		ВызватьИсключение;
		
	КонецПопытки;
	
	// Заполнение реквизитов.
	Если Выборка.Следующий() Тогда
		ЗаполнитьЗначенияСвойств(Результат, Выборка);
	КонецЕсли;
	
	Возврат Результат;
	
КонецФункции

// Значение реквизита, прочитанного из информационной базы по ссылке на объект.
//
// Если необходимо зачитать реквизит независимо от прав текущего пользователя,
// то следует использовать предварительный переход в привилегированный режим.
//
// Параметры:
//  Ссылка    - ЛюбаяСсылка - объект, значения реквизитов которого необходимо получить.
//            - Строка      - полное имя предопределенного элемента, значения реквизитов которого необходимо получить.
//  ИмяРеквизита       - Строка - имя получаемого реквизита.
//  ВыбратьРазрешенные - Булево - если Истина, то запрос к объекту выполняется с учетом прав пользователя, и в случае,
//                                    - если есть ограничение на уровне записей, то возвращается Неопределено;
//                                    - если нет прав для работы с таблицей, то возникнет исключение.
//                              - если Ложь, то возникнет исключение при отсутствии прав на таблицу
//                                или любой из реквизитов.
//
// Возвращаемое значение:
//  Произвольный - зависит от типа значения прочитанного реквизита.
//               - если в параметр Ссылка передана пустая ссылка, то возвращается Неопределено.
//               - если в параметр Ссылка передана ссылка несуществующего объекта (битая ссылка), 
//                 то возвращается Неопределено.
//
Функция ЗначениеРеквизитаОбъекта(Ссылка, ИмяРеквизита, ВыбратьРазрешенные = Ложь) Экспорт
	
	Если ПустаяСтрока(ИмяРеквизита) Тогда 
		ВызватьИсключение НСтр("ru = 'Неверный второй параметр ИмяРеквизита: 
		                             |- Имя реквизита должно быть заполнено'");
	КонецЕсли;
	
	Результат = ЗначенияРеквизитовОбъекта(Ссылка, ИмяРеквизита, ВыбратьРазрешенные);
	Возврат Результат[СтрЗаменить(ИмяРеквизита, ".", "")];
	
КонецФункции 

// Значения реквизитов, прочитанные из информационной базы для нескольких объектов.
//
//  Если необходимо зачитать реквизит независимо от прав текущего пользователя,
//  то следует использовать предварительный переход в привилегированный режим.
//
// Параметры:
//  МассивСсылок - Массив - массив ссылок на объекты одного типа.
//                          Значения массива должны быть ссылками на объекты одного типа.
//                          если массив пуст, то результатом будет пустое соответствие.
//  ИменаРеквизитов - Строка - имена реквизитов перечисленные через запятую, в формате требований к свойствам
//                             структуры. Например, "Код, Наименование, Родитель".
//  ВыбратьРазрешенные - Булево - если Истина, то запрос к объектам выполняется с учетом прав пользователя, и в случае,
//                                    - если какой-либо объект будет исключен из выборки по правам, то этот объект
//                                      будет исключен и из результата;
//                              - если Ложь, то возникнет исключение при отсутствии прав на таблицу
//                                или любой из реквизитов.
//
// Возвращаемое значение:
//  Соответствие - список объектов и значений их реквизитов:
//   * Ключ - ЛюбаяСсылка - ссылка на объект;
//   * Значение - Структура - значения реквизитов:
//    ** Ключ - Строка - имя реквизита;
//    ** Значение - Произвольный - значение реквизита.
// 
Функция ЗначенияРеквизитовОбъектов(МассивСсылок, ИменаРеквизитов, ВыбратьРазрешенные = Ложь) Экспорт
	
	Если ПустаяСтрока(ИменаРеквизитов) Тогда 
		ВызватьИсключение НСтр("ru = 'Неверный второй параметр ИменаРеквизитов: 
		                             |- Поле объекта должно быть указано'");
	КонецЕсли;
	
	Если Найти(ИменаРеквизитов, ".") <> 0 Тогда 
		ВызватьИсключение НСтр("ru = 'Неверный второй параметр ИменаРеквизитов: 
		                             |- Обращение через точку не поддерживается'");
	КонецЕсли;
	
	ЗначенияРеквизитов = Новый Соответствие;
	Если МассивСсылок.Количество() = 0 Тогда
		Возврат ЗначенияРеквизитов;
	КонецЕсли;
	
	ПерваяСсылка = МассивСсылок[0];
	
	Попытка
		ПолноеИмяОбъектаМетаданных = ПерваяСсылка.Метаданные().ПолноеИмя();
	Исключение
		ВызватьИсключение НСтр("ru = 'Неверный первый параметр МассивСсылок: 
		                             |- Значения массива должны быть ссылками'");
	КонецПопытки;
	
	Запрос = Новый Запрос;
	Запрос.Текст =
		"ВЫБРАТЬ " + ?(ВыбратьРазрешенные, "РАЗРЕШЕННЫЕ", "") + "
		|	Ссылка КАК Ссылка, " + ИменаРеквизитов + "
		|ИЗ
		|	" + ПолноеИмяОбъектаМетаданных + " КАК Таблица
		|ГДЕ
		|	Таблица.Ссылка В (&МассивСсылок)";
	Запрос.УстановитьПараметр("МассивСсылок", МассивСсылок);
	
	Попытка
		Выборка = Запрос.Выполнить().Выбрать();
	Исключение
		
		// Удаление пробелов.
		ИменаРеквизитов = СтрЗаменить(ИменаРеквизитов, " ", "");
		// Преобразование параметра в массив полей.
		ИменаРеквизитов = СтрРазделить(ИменаРеквизитов, ",", Ложь);
		
		// Не удалось распознать ошибку, проброс первичной ошибки.
		ВызватьИсключение;
		
	КонецПопытки;
	
	Пока Выборка.Следующий() Цикл
		Результат = Новый Структура(ИменаРеквизитов);
		ЗаполнитьЗначенияСвойств(Результат, Выборка);
		ЗначенияРеквизитов[Выборка.Ссылка] = Результат;
	КонецЦикла;
	
	Возврат ЗначенияРеквизитов;
	
КонецФункции

// Значения реквизита, прочитанного из информационной базы для нескольких объектов.
//
//  Если необходимо зачитать реквизит независимо от прав текущего пользователя,
//  то следует использовать предварительный переход в привилегированный режим.
//
// Параметры:
//  МассивСсылок       - Массив - массив ссылок на объекты одного типа.
//                                Значения массива должны быть ссылками на объекты одного типа.
//  ИмяРеквизита       - Строка - например, "Код".
//  ВыбратьРазрешенные - Булево - если Истина, то запрос к объектам выполняется с учетом прав пользователя, и в случае,
//                                    - если какой-либо объект будет исключен из выборки по правам, то этот объект
//                                      будет исключен и из результата;
//                              - если Ложь, то возникнет исключение при отсутствии прав на таблицу
//                                или любой из реквизитов.
//
// Возвращаемое значение:
//  Соответствие - Ключ - ссылка на объект, Значение - значение прочитанного реквизита.
//      * Ключ     - ссылка на объект, 
//      * Значение - значение прочитанного реквизита.
// 
Функция ЗначениеРеквизитаОбъектов(МассивСсылок, ИмяРеквизита, ВыбратьРазрешенные = Ложь) Экспорт
	
	Если ПустаяСтрока(ИмяРеквизита) Тогда 
		ВызватьИсключение НСтр("ru = 'Неверный второй параметр ИмяРеквизита: 
		                             |- Имя реквизита должно быть заполнено'");
	КонецЕсли;
	
	ЗначенияРеквизитов = ЗначенияРеквизитовОбъектов(МассивСсылок, ИмяРеквизита, ВыбратьРазрешенные);
	Для каждого Элемент Из ЗначенияРеквизитов Цикл
		ЗначенияРеквизитов[Элемент.Ключ] = Элемент.Значение[ИмяРеквизита];
	КонецЦикла;
		
	Возврат ЗначенияРеквизитов;
	
КонецФункции

Функция ЭтоПредопределенныйЭлемент(ОбъектИлиСсылка) Экспорт
	
	ЭтоПредопределенный = Ложь;
	
	Попытка
		ЭтоПредопределенный = ОбъектИлиСсылка.Предопределенный
	Исключение
		ЭтоПредопределенный = Ложь
	КонецПопытки;
	
	Возврат ЭтоПредопределенный;
	
КонецФункции

Функция УстановитьСвойствоСтруктуры(Структура, Ключ, Значение, Дополнять = Ложь) Экспорт
	
	#Область Предусловия
	
	Если Не ТипЗнч(Структура) = Тип("Структура") Тогда
		Возврат Ложь;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(Ключ)  Тогда
		Возврат Ложь;
	КонецЕсли;
	
	#КонецОбласти
	
	СвойствоУстановлено = Ложь;
	
	ТекущееЗначение = Неопределено;
	ЕстьПоле = Структура.Свойство(Ключ, ТекущееЗначение);
	
	Если ЕстьПоле Тогда
		Если Не (ТекущееЗначение = Значение) Тогда
			Структура[Ключ] = Значение;
			СвойствоУстановлено = Истина;
		КонецЕсли;
	Иначе
		Если Дополнять Тогда
			Структура.Вставить(Ключ, Значение);
			СвойствоУстановлено = Истина;
		КонецЕсли;
	КонецЕсли;
	
	Возврат СвойствоУстановлено;
	
КонецФункции

#КонецОбласти

#Область БСП

#Область ОбщегоНазначенияКлиентСервер

// Проверяет наличие реквизита или свойства у произвольного объекта без обращения к метаданным.
//
// Параметры:
//  Объект       - Произвольный - объект, у которого нужно проверить наличие реквизита или свойства;
//  ИмяРеквизита - Строка       - имя реквизита или свойства.
//
// Возвращаемое значение:
//  Булево.
//
Функция ЕстьРеквизитИлиСвойствоОбъекта(Объект, ИмяРеквизита) Экспорт
	
	КлючУникальности   = Новый УникальныйИдентификатор;
	СтруктураРеквизита = Новый Структура(ИмяРеквизита, КлючУникальности);
	ЗаполнитьЗначенияСвойств(СтруктураРеквизита, Объект);
	
	Возврат СтруктураРеквизита[ИмяРеквизита] <> КлючУникальности;
	
КонецФункции

// Возвращает значение свойства структуры.
//
// Параметры:
//   Структура - Структура, ФиксированнаяСтруктура - Объект, из которого необходимо прочитать значение ключа.
//   Ключ - Строка - Имя свойства структуры, для которого необходимо прочитать значение.
//   ЗначениеПоУмолчанию - Произвольный - Необязательный. Возвращается когда в структуре нет значения по указанному
//                                        ключу.
//       Для скорости рекомендуется передавать только быстро вычисляемые значения (например примитивные типы),
//       а инициализацию более тяжелых значений выполнять после проверки полученного значения (только если это
//       требуется).
//
// Возвращаемое значение:
//	Произвольный - Значение свойства структуры. ЗначениеПоУмолчанию если в структуре нет указанного свойства.
//
Функция СвойствоСтруктуры(Структура, Ключ, ЗначениеПоУмолчанию = Неопределено) Экспорт
	
	Если Структура = Неопределено Тогда
		Возврат ЗначениеПоУмолчанию;
	КонецЕсли;
	
	Если Не (ТипЗнч(Структура) = Тип("Структура")) Тогда
		Возврат ЗначениеПоУмолчанию;
	КонецЕсли;
	
	Результат = ЗначениеПоУмолчанию;
	
	Если Структура.Свойство(Ключ, Результат) Тогда
		Возврат Результат;
	Иначе
		Возврат ЗначениеПоУмолчанию;
	КонецЕсли;
	
КонецФункции

#КонецОбласти 

#КонецОбласти 

#КонецОбласти

#Область ОпределениеТипов

#Область СсылочныеТипыДанных

// Определяет принадлежность объекта метаданных к общему типу "Документ".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к документам.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является документом.
//
Функция ЭтоДокумент(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.Документы.Содержит(ОбъектМетаданных);
	
КонецФункции

// Определяет принадлежность объекта метаданных к общему типу "Справочник".
//
// Параметры:
//	ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//	Булево - Истина, если объект является справочником.
//
Функция ЭтоСправочник(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.Справочники.Содержит(ОбъектМетаданных);
	
КонецФункции

// Определяет принадлежность объекта метаданных к общему типу "Перечисление".
//
// Параметры:
//	ОбъектМетаданных - ОбъектМетаданных, объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//	Булево - Истина, если объект является перечислением.
//
Функция ЭтоПеречисление(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.Перечисления.Содержит(ОбъектМетаданных);
	
КонецФункции

// Определяет принадлежность объекта метаданных к общему типу "План обмена".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является планом обмена.
//
Функция ЭтоПланОбмена(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.ПланыОбмена.Содержит(ОбъектМетаданных);
	
КонецФункции

// Определяет принадлежность объекта метаданных к общему типу "План видов характеристик".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является планом видов характеристик.
//
Функция ЭтоПланВидовХарактеристик(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.ПланыВидовХарактеристик.Содержит(ОбъектМетаданных);
	
КонецФункции

// Определяет принадлежность объекта метаданных к общему типу "Бизнес-процесс".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является бизнес-процессом.
//
Функция ЭтоБизнесПроцесс(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.БизнесПроцессы.Содержит(ОбъектМетаданных);
	
КонецФункции

// Определяет принадлежность объекта метаданных к общему типу "Задача".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является задачей.
//
Функция ЭтоЗадача(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.Задачи.Содержит(ОбъектМетаданных);
	
КонецФункции

// Определяет принадлежность объекта метаданных к общему типу "План счетов".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является планом счетов.
//
Функция ЭтоПланСчетов(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.ПланыСчетов.Содержит(ОбъектМетаданных);
	
КонецФункции

// Определяет принадлежность объекта метаданных к общему типу "План видов расчета".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является планом видов расчета.
//
Функция ЭтоПланВидовРасчета(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.ПланыВидовРасчета.Содержит(ОбъектМетаданных);
	
КонецФункции

#КонецОбласти

#Область Регистры

// Определяет принадлежность объекта метаданных к общему типу "Регистр сведений".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является регистром сведений.
//
Функция ЭтоРегистрСведений(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.РегистрыСведений.Содержит(ОбъектМетаданных);
	
КонецФункции

// Определяет принадлежность объекта метаданных к общему типу "Регистр накопления".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является регистром накопления.
//
Функция ЭтоРегистрНакопления(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.РегистрыНакопления.Содержит(ОбъектМетаданных);
	
КонецФункции

// Определяет принадлежность объекта метаданных к общему типу "Регистр бухгалтерии".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является регистром бухгалтерии.
//
Функция ЭтоРегистрБухгалтерии(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.РегистрыБухгалтерии.Содержит(ОбъектМетаданных);
	
КонецФункции

// Определяет принадлежность объекта метаданных к общему типу "Регистр расчета".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является регистром расчета.
//
Функция ЭтоРегистрРасчета(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.РегистрыРасчета.Содержит(ОбъектМетаданных);
	
КонецФункции

#КонецОбласти

#Область Константы

// Определяет принадлежность объекта метаданных к общему типу "Константа".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является константой.
//
Функция ЭтоКонстанта(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.Константы.Содержит(ОбъектМетаданных);
	
КонецФункции

#КонецОбласти

#Область ЖурналыДокументов

// Определяет принадлежность объекта метаданных к общему типу "Журнал документов".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является журналом документов.
//
Функция ЭтоЖурналДокументов(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.ЖурналыДокументов.Содержит(ОбъектМетаданных);
	
КонецФункции

#КонецОбласти

#Область Последовательности

// Определяет принадлежность объекта метаданных к общему типу "Последовательности".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является последовательностью.
//
Функция ЭтоПоследовательность(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.Последовательности.Содержит(ОбъектМетаданных);
	
КонецФункции

#КонецОбласти

#Область РегламентныеЗадания

// Определяет принадлежность объекта метаданных к общему типу "Регламентные задания".
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является регламентным заданием.
//
Функция ЭтоРегламентноеЗадание(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.РегламентныеЗадания.Содержит(ОбъектМетаданных);
	
КонецФункции

#КонецОбласти

#Область Общие

// Определяет принадлежность объекта метаданных к типу регистр.
//
// Параметры:
//  ОбъектМетаданных - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
// 
// Возвращаемое значение:
//   Булево - Истина, если объект является каким-либо регистром.
//
Функция ЭтоРегистр(ОбъектМетаданных) Экспорт
	
	Возврат Метаданные.РегистрыБухгалтерии.Содержит(ОбъектМетаданных)
	Или Метаданные.РегистрыНакопления.Содержит(ОбъектМетаданных)
	Или Метаданные.РегистрыРасчета.Содержит(ОбъектМетаданных)
	Или Метаданные.РегистрыСведений.Содержит(ОбъектМетаданных);
	
КонецФункции

Функция ЭтоПодсистема(ОбъектМд) Экспорт
	
	Результат = Метаданные.Подсистемы.Содержит(ОбъектМд);
	Возврат Результат;
	
КонецФункции

Функция ЭтоОбщийМодуль(ОбъектМд) Экспорт
	
	Результат = Метаданные.ОбщиеМодули.Содержит(ОбъектМд);
	Возврат Результат;
	
КонецФункции

Функция ЭтоПараметрСеанса(ОбъектМд) Экспорт
	
	Результат = Метаданные.ПараметрыСеанса.Содержит(ОбъектМд);
	Возврат Результат;
	
КонецФункции

Функция ЭтоОтчет(ОбъектМд) Экспорт
	
	Результат = Метаданные.Отчеты.Содержит(ОбъектМд);
	Возврат Результат;
	
КонецФункции

Функция ЭтоОбработка(ОбъектМд) Экспорт
	
	Результат = Метаданные.Обработки.Содержит(ОбъектМд);
	Возврат Результат;
	
КонецФункции

Функция ЭтоВнешнийИсточникДанных(ОбъектМд) Экспорт
	
	Результат = Метаданные.ВнешниеИсточникиДанных.Содержит(ОбъектМд);
	Возврат Результат;
	
КонецФункции

// Определяет принадлежность объекта метаданных к ссылочному типу.
//
// Параметры:
//	ОбъектМд - ОбъектМетаданных - объект, для которого необходимо определить принадлежность к заданному типу.
//
// Возвращаемое значение:
//	Булево - Истина, если объект ссылочного типа.
//
Функция ЭтоОбъектСсылочногоТипа(ОбъектМд) Экспорт
	
	ИмяОбъектаМетаданных = ОбъектМд.ПолноеИмя();
	
	Позиция = Найти(ИмяОбъектаМетаданных, ".");
	
	Если Позиция > 0 Тогда
		
		ИмяБазовогоТипа = Лев(ИмяОбъектаМетаданных, Позиция - 1);
		
		ЭтоСсылочныйТип = 
			(ИмяБазовогоТипа = "Справочник" Или ИмяБазовогоТипа = "Документ"
			Или ИмяБазовогоТипа = "БизнесПроцесс" Или ИмяБазовогоТипа = "Задача"
			Или ИмяБазовогоТипа = "ПланСчетов" Или ИмяБазовогоТипа = "ПланОбмена"
			Или ИмяБазовогоТипа = "ПланВидовХарактеристик"
			Или ИмяБазовогоТипа = "ПланВидовРасчета");
		
		Возврат ЭтоСсылочныйТип;
	Иначе
		Возврат Ложь;
	КонецЕсли;
	
КонецФункции

#КонецОбласти

#КонецОбласти

#Область Типы

Функция ОписаниеТиповЧисло() Экспорт
	
	Результат = Новый ОписаниеТипов();
	Результат = Новый ОписаниеТипов(Результат, "Число");
	
	Возврат Результат;
	
КонецФункции

Функция Тип_СтруктураМетаданныхКонфигурации() Экспорт
	
	Результат = Новый ДеревоЗначений;
	Результат.Колонки.Добавить("ТипЗаписи");            // Тип записи структуры МД конфигурации (например: "КоллекцияОбъектовМетаданных", "ОбъектМетаданных").
	Результат.Колонки.Добавить("ИмяКоллекции");         // Имя коллекции (например: "Справочники").
	Результат.Колонки.Добавить("ИмяЭлементаКоллекции"); // Имя элемента коллекции (например: "Справочник").
	Результат.Колонки.Добавить("Имя");                  // Имя объекта МД (например: "Номенклатура").
	Результат.Колонки.Добавить("Представление");
	Результат.Колонки.Добавить("Синоним");              // Синоним имени объекта МД (например: "Номенклатура").
	Результат.Колонки.Добавить("Комментарий");          // Имя объекта МД (например: "Номенклатура").
	Результат.Колонки.Добавить("КоличествоЗаписей");    // Количество записей элементов данного вида (например: количество записей в справочнике).
	Результат.Колонки.Добавить("НомерКартинки");
	Результат.Колонки.Добавить("ПолноеИмя");            // Полное имя объекта метаданных.
	Результат.Колонки.Добавить("НеОтображать");
	Результат.Колонки.Добавить("ИмяФормы");             // Имя формы
	
	Возврат Результат;
	
КонецФункции

Функция Тип_ЗаписьСтруктурыМетаданныхКонфигурации() Экспорт
	
	Результат = Новый Структура;
	
	СтруктураМетаданныхКонфигурации = Тип_СтруктураМетаданныхКонфигурации();
	
	Для Каждого Колонка Из СтруктураМетаданныхКонфигурации.Колонки Цикл
		Результат.Вставить(Колонка.Имя);
	КонецЦикла;
	
	Возврат Результат;
	
КонецФункции

Функция Тип_СвойстваОбъектаОбработкиДанных() Экспорт
	
	Результат = Новый Структура;
	Результат.Вставить("ИмяКоллекции");
	Результат.Вставить("ИмяЭлементаКоллекции");
	Результат.Вставить("Имя");
	
	Возврат Результат;
	
КонецФункции

Функция Тип_ПоляСубконтоСпискаРегистраБухгалтерии() Экспорт
	
	Результат = Новый Структура("ВидСубконто, Субконто");
	
	Результат.ВидСубконто = Новый Структура("Дт, Кт, ГруппаДт, ГруппаКт", Новый Массив(), Новый Массив(), Неопределено, Неопределено);
	Результат.Субконто = Новый Структура("Дт, Кт, ГруппаДт, ГруппаКт", Новый Массив(), Новый Массив(), Неопределено, Неопределено);
	
	Возврат Результат;
	
КонецФункции

Функция Тип_ПараметрыТаблицыПоИмениКоманды()
	
	Результат = Новый Структура("ТипТаблицы, ИмяТаблицы");
	Результат.Вставить("ТипТаблицы", "");
	Результат.Вставить("ИмяТаблицы", "");
	
	Возврат Результат;
	
КонецФункции

Функция Тип_ПоляРегистраБухгалтерииДтКт()
	
	Результат = Новый Структура;
	Результат.Вставить("Измерения", Новый Массив);
	Результат.Вставить("Ресурсы", Новый Массив);
	Результат.Вставить("Счета", Новый Массив);
	Результат.Вставить("МаксКоличествоСубконто", 0);
	
	Возврат Результат;
	
КонецФункции

Функция Тип_СвойстваПользователяИнформационнойБазы(ИмяСвойства = "", СинонимСвойства = "", КомментарийСвойства = "")
	
	Результат = Новый Структура;
	Результат.Вставить("Имя", ИмяСвойства);
	Результат.Вставить("Синоним", СинонимСвойства);
	Результат.Вставить("Комментарий", КомментарийСвойства);
	
	Возврат Результат;
	
КонецФункции

Функция Тип_ПараметрыКолонкиСпискаЭлементовОбъектаМетаданных(ИмяРеквизита = "", Синоним = "", Комментарий = "", ТипЗначенияКолонки = Неопределено, Видимость = Ложь) Экспорт
	
	Результат = Новый Структура;
	Результат.Вставить("ИмяРеквизита", ИмяРеквизита);
	Результат.Вставить("Синоним", Синоним);
	Результат.Вставить("Комментарий", Комментарий);
	Результат.Вставить("Видимость", Видимость);
	
	ПредставлениеТипа = СтрокаОписанияТипов(ТипЗначенияКолонки);
	Результат.Вставить("ПредставлениеТипа", ПредставлениеТипа);
	
	Возврат Результат;
	
КонецФункции

Функция Тип_ПараметрыФормированияСтруктурыМетаданных() Экспорт
	
	Результат = Новый Структура;
	
	// Входящие параметры
	Результат.Вставить("Отбор", Новый Массив);
	Результат.Вставить("СортироватьОбъектыМетаданных", Ложь);
	
	// Исходящие параметры
	Результат.Вставить("ИдОбъектаХраненияВременныхДанных",     ""); // Строка - идентификатор основной формы приложения, необходим для размещения данных во временном хранилище.
	Результат.Вставить("АдресСтруктураХраненияБазыДанных",     ""); // Строка - адрес ВХ, таблица структуры хранения базы.
	Результат.Вставить("АдресСтруктурыМетаданныхКонфигурации", "");// Строка - адерс ВХ, дерево метаданных.
	
	Возврат Результат;
	
КонецФункции

// Отбор для формирования структуры метаданных.
//
// Параметры:
//	ИмяПоля - Строка - имя поля поиска.
//	ЗначениеОтбора - Строка - строка поиска.
//	ПрефиксТипаОбъекта - Строка - префикс типа объекта.
//
// Примечание:
//	ЗначениеОтбора - может принимать значение вида: "номенкл", "сп номенкл". Где "сп" - это префикс типа объекта.
//
Функция Тип_ОтборФормированияСтруктурыМетаданных(Знач ИмяПоля, Знач ЗначениеОтбора, Знач ПрефиксТипаОбъекта = "") Экспорт
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяПоля) Тогда
		Возврат Неопределено;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(ЗначениеОтбора) Тогда
		Возврат Неопределено;
	КонецЕсли;
	
	#КонецОбласти
	
	ИмяПоля            = СокрЛП(ИмяПоля);
	ЗначениеОтбора     = СокрЛП(ЗначениеОтбора);
	ПрефиксТипаОбъекта = СокрЛП(ПрефиксТипаОбъекта);
	
	// Выделить префикс типа объекта.
	
	Поз = СтрНайти(ЗначениеОтбора, " ");
	
	ЕстьПрефикс = (Поз > 0);
	
	Если ЕстьПрефикс Тогда
		ПрефиксТипаОбъекта = ВРег(Лев(ЗначениеОтбора, Поз - 1));
		ЗначениеОтбора     = Сред(ЗначениеОтбора, Поз + 1);
	КонецЕсли;
	
	Результат = Новый Структура();
	Результат.Вставить("ИмяПоля",            ИмяПоля);            // "Имя"
	Результат.Вставить("ПрефиксТипаОбъекта", ПрефиксТипаОбъекта); // "рс"
	Результат.Вставить("ЗначениеОтбора",     ЗначениеОтбора);     // "КурсыВалют"
	
	Возврат Результат;
	
КонецФункции

#КонецОбласти

#Область Классы

#Область Навигатор

// Имя элемента - динамического списка на форме - к которому относится нажатая команда
// редактирования записи регистра.
//
// Параметры:
//	ИмяЭлемента - Строка, имя элемента-команды, например: "Команда_777_РедактированиеЗаписи_777_Список_777_РегистрыНакопления_777_РегистрНакопления_777_ТоварыНаСкладах_777_12".
//
// Возвращаемое значение:
//	Строка, имя элемента списка регистра, например: "Список_777_РегистрыНакопления_777_РегистрНакопления_777_ТоварыНаСкладах_777_12".
//
Функция ИмяЭлементаСпискаРегистраПоИмениЭлементаКомандыРедактированияЗаписи(ИмяЭлемента) Экспорт
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяЭлемента) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	Разделитель = Система_РазделительЧастейИмен;
	
	ЧастиИмени = СтрРазделить(ИмяЭлемента, Разделитель, Ложь);
	
	Если ЧастиИмени.Количество() = 0 Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Если ЧастиИмени.Количество() < 7 Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	ЧастиИмени.Удалить(0);
	ЧастиИмени.Удалить(0);
	
	Результат = СтрСоединить(ЧастиИмени, Разделитель);
	
	Возврат Результат;
	
КонецФункции

// Тип таблицы для редактора записи.
//
// Параметры:
//	ИмяЭлемента - Строка, имя элемента, например: "Команда_777_РедактированиеЗаписи_777_Список_777_РегистрыНакопления_777_РегистрНакопления_777_ТоварыНаСкладах_777_12"
//
// Возвращаемое значение:
//	Структура, параметры таблицы записи, см. Тип_ПараметрыТаблицыЗаписиПоИмениЭлемента().
//
Функция ПараметрыТаблицыЗаписиПоИмениЭлемента(ИмяЭлемента) Экспорт
	
	Результат       = Тип_ПараметрыТаблицыЗаписиПоИмениЭлемента();
	ПустойРезультат = Тип_ПараметрыТаблицыЗаписиПоИмениЭлемента();
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ИмяЭлемента) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	Разделитель = Система_РазделительЧастейИмен;
	
	ЧастиИмени = СтрРазделить(ИмяЭлемента, Разделитель, Истина);
	
	Если ЧастиИмени.Количество() = 0 Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Если ЧастиИмени.Количество() < 7 Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	Результат.ТипТаблицы = ЧастиИмени[4]; // "РегистрСведений"
	Результат.ИмяТаблицы = ЧастиИмени[5]; // "НезависимыйНепериодическийРегистрСведений"
	
	Возврат Результат;
	
КонецФункции

Функция Тип_ПараметрыТаблицыЗаписиПоИмениЭлемента()
	
	Результат = Новый Структура("ТипТаблицы, ИмяТаблицы", "", "");
	Возврат Результат;
	
КонецФункции

// Параметры и данные записи таблицы регистра сведений, накопления, бухгалтерии, расчета.
// Используется при выполнении команды редактирования (просмотра) записи регистра из формы
// списка регистра.
//
// Параметры:
//	ДанныеЗаписи - ДанныеФормыСтруктура, данные записи.
//	ПараметрыТаблицы - Структура, параметры таблицы, см. Тип_ПараметрыТаблицыЗаписиПоИмениЭлемента().
//
// Возвращаемое значение:
//	Структура, параметры записи таблицы регистра.
//	
Функция ПараметрыЗаписиТаблицыРегистра(ДанныеЗаписи, ПараметрыТаблицы) Экспорт
	
	#Область Контекст
	
	Если Ложь Тогда
		МетаданныеРегистра = Метаданные.РегистрыСведений.НезависимыйНепериодическийРегистрСведений;
	КонецЕсли;
	
	#КонецОбласти
	
	Результат = Новый Структура;
	Результат.Вставить("ПараметрыЗаписи", ПараметрыТаблицы);
	Результат.Вставить("Измерения", Новый Структура);
	Результат.Вставить("Ресурсы", Новый Структура);
	Результат.Вставить("Реквизиты", Новый Структура);
	
	МетаданныеРегистра = МетаданныеРегистраПоОписанию(ПараметрыТаблицы);
	
	Если ПараметрыТаблицы.ТипТаблицы = "ТабличнаяЧасть" Тогда
		
		Результат.Вставить("Регистратор");
		Результат.Вставить("ОбъектБазы");
		Результат.Вставить("НомерЗаписи");
		
		Если ДанныеЗаписи.Свойство("Регистратор") Тогда
			Результат.Регистратор = ДанныеЗаписи.Регистратор;
			Результат.ОбъектБазы = ДанныеЗаписи.Регистратор;
		КонецЕсли;
		
		Если ДанныеЗаписи.Свойство("НомерСтроки") Тогда
			Результат.НомерЗаписи = ДанныеЗаписи.НомерСтроки;
		КонецЕсли;
		
	ИначеЕсли ПараметрыТаблицы.ТипТаблицы = "РегистрНакопления" Или ПараметрыТаблицы.ТипТаблицы = "РегистрРасчета" Или ПараметрыТаблицы.ТипТаблицы = "РегистрБухгалтерии" Тогда
		
		Результат.Вставить("Регистратор");
		Результат.Вставить("ОбъектБазы");
		Результат.Вставить("НомерЗаписи");
		
		Если ДанныеЗаписи.Свойство("Регистратор") Тогда
			Результат.Регистратор = ДанныеЗаписи.Регистратор;
			Результат.ОбъектБазы = ДанныеЗаписи.Регистратор;
		КонецЕсли;
		
		Если ДанныеЗаписи.Свойство("НомерСтроки") Тогда
			Результат.НомерЗаписи = ДанныеЗаписи.НомерСтроки;
		КонецЕсли;
		
	ИначеЕсли ПараметрыТаблицы.ТипТаблицы = "РегистрСведений" Тогда
		
		Если МетаданныеРегистра.РежимЗаписи = Метаданные.СвойстваОбъектов.РежимЗаписиРегистра.ПодчинениеРегистратору Тогда
			
			Результат.Вставить("Регистратор");
			Результат.Вставить("ОбъектБазы");
			Результат.Вставить("НомерЗаписи");
			
			Если ДанныеЗаписи.Свойство("Регистратор") Тогда
				Результат.Регистратор = ДанныеЗаписи.Регистратор;
				Результат.ОбъектБазы = ДанныеЗаписи.Регистратор;
			КонецЕсли;
			
			Если ДанныеЗаписи.Свойство("НомерСтроки") Тогда
				Результат.НомерЗаписи = ДанныеЗаписи.НомерСтроки;
			КонецЕсли;
			
		КонецЕсли;
		
		Если Не (МетаданныеРегистра.ПериодичностьРегистраСведений = Метаданные.СвойстваОбъектов.ПериодичностьРегистраСведений.Непериодический) Тогда
			
			Результат.Вставить("Период");
			
			Если ДанныеЗаписи.Свойство("Период") Тогда
				Результат.Период = ДанныеЗаписи.Период;
			КонецЕсли;
			
		КонецЕсли;
		
		Для каждого Измерение Из МетаданныеРегистра.Измерения Цикл
			Результат.Измерения.Вставить(Измерение.Имя);
		КонецЦикла;
		
		Для каждого Реквизит Из МетаданныеРегистра.Реквизиты Цикл
			Результат.Реквизиты.Вставить(Реквизит.Имя);
		КонецЦикла;
		
		Для каждого Ресурс Из МетаданныеРегистра.Ресурсы Цикл
			Результат.Ресурсы.Вставить(Ресурс.Имя);
		КонецЦикла;
		
		ЗаполнитьЗначенияСвойств(Результат.Измерения, ДанныеЗаписи);
		ЗаполнитьЗначенияСвойств(Результат.Реквизиты, ДанныеЗаписи);
		ЗаполнитьЗначенияСвойств(Результат.Ресурсы, ДанныеЗаписи);
		
	КонецЕсли; 
	
	Возврат Результат;
	
КонецФункции

// Метаданные регистра сведений, накопления, бухгалтерии, расчетов по описанию.
//
// Параметры:
//	ПараметрыТаблицы - Структура, параметры таблицы, см. Тип_ПараметрыТаблицыЗаписиПоИмениЭлемента().
//
// Возвращаемое значение:
//	ОбъектМетаданных, метаданные регистра.
//	
Функция МетаданныеРегистраПоОписанию(ПараметрыТаблицы) Экспорт
	
	Результат = Неопределено;
	ПустойРезультат = Неопределено;
	
	ИмяКоллекции = ИмяКоллекцииОписанийСвойствОбъектаМетаданных(ПараметрыТаблицы.ТипТаблицы);
	
	Результат = Метаданные[ИмяКоллекции][ПараметрыТаблицы.ИмяТаблицы];
	
	Возврат Результат;
	
КонецФункции

// Имя коллекции описаний свойст объектов метаданных.
//
// Параметры:
//	ИмяТипа - Строка, имя типа объекта метаданных, например: "РегистрСведений".
//
// Возвращаемое значение:
//	Строка, имя коллекции, например: "РегистрыСведений"
//	
Функция ИмяКоллекцииОписанийСвойствОбъектаМетаданных(ИмяТипа)
	
	Если ИмяТипа = "РегистрСведений" Тогда
		Возврат "РегистрыСведений";
	ИначеЕсли ИмяТипа = "РегистрНакопления" Тогда
		Возврат "РегистрыНакопления";
	ИначеЕсли ИмяТипа = "РегистрРасчета" Тогда
		Возврат "РегистрыРасчета";
	ИначеЕсли ИмяТипа = "РегистрБухгалтерии" Тогда
		Возврат "РегистрыБухгалтерии";
	КонецЕсли;
	
	Возврат Неопределено;
	
КонецФункции

// Имя формы редактора значения. Почти для каждого типа значения есть своя отдельная
// форма редактора. Иначе код универсального редактора будет слишком перегружен.
//
// Параметры:
//	ЗначениеДляРедактирования - ЛюбоеЗначение, строка, число, ссылка и пр.
//
// Возвращаемое значение:
//	Строка, имя формы редактора значения: {"РедакторОбъекта"|"РедакторЗаписи"|"РедакторПеречисления"}
//
Функция ИмяФормыРедактораЗначения(ЗначениеДляРедактирования) Экспорт
	
	Результат = "";
	ПустойРезультат = "";
	
	#Область Предусловия
	
	Если Не ЗначениеЗаполнено(ЗначениеДляРедактирования) Тогда
		Возврат ПустойРезультат;
	КонецЕсли;
	
	#КонецОбласти
	
	Если ТипЗнч(ЗначениеДляРедактирования) = Тип("ХранилищеЗначения") Тогда
		Результат = "РедакторХранилищаЗначения";
	Иначе
		
		Попытка
			МетаданныеЗначения = ЗначениеДляРедактирования.Метаданные();
		Исключение
			Возврат ПустойРезультат;
		КонецПопытки;
		
		Если ЭтоПеречисление(МетаданныеЗначения) Тогда
			Результат = "РедакторПеречисления";
		ИначеЕсли ЭтоСправочник(МетаданныеЗначения) Тогда
			Результат = "РедакторОбъекта";
		ИначеЕсли ЭтоДокумент(МетаданныеЗначения) Тогда
			Результат = "РедакторОбъекта";
		ИначеЕсли ЭтоПланВидовХарактеристик(МетаданныеЗначения) Тогда
			Результат = "РедакторОбъекта";
		ИначеЕсли ЭтоПланВидовРасчета(МетаданныеЗначения) Тогда
			Результат = "РедакторОбъекта";
		ИначеЕсли ЭтоПланСчетов(МетаданныеЗначения) Тогда
			Результат = "РедакторОбъекта";
		КонецЕсли;
		
	КонецЕсли;
	
	Возврат Результат;
	
КонецФункции

#КонецОбласти 

#КонецОбласти 

ПриИнициализации();